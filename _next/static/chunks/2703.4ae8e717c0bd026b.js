"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2703],{12096:function(t,e,r){r.r(e),r.d(e,{isAnyArray:function(){return o}});let s=Object.prototype.toString;function o(t){let e=s.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},81080:function(t,e,r){r.r(e),r.d(e,{default:function(){return o}});var s=r(12096);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,s.isAnyArray)(t)){if(0===t.length)throw TypeError("input must not be empty")}else throw TypeError("input must be an array");if(void 0!==r.output){if(!(0,s.isAnyArray)(r.output))throw TypeError("output option must be an array if specified");e=r.output}else e=Array(t.length);var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,s.isAnyArray)(t))throw TypeError("input must be an array");if(0===t.length)throw TypeError("input must not be empty");var r=e.fromIndex,o=void 0===r?0:r,i=e.toIndex,n=void 0===i?t.length:i;if(o<0||o>=t.length||!Number.isInteger(o))throw Error("fromIndex must be a positive integer smaller than length");if(n<=o||n>t.length||!Number.isInteger(n))throw Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=t[o],u=o+1;u<n;u++)t[u]<h&&(h=t[u]);return h}(t),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,s.isAnyArray)(t))throw TypeError("input must be an array");if(0===t.length)throw TypeError("input must not be empty");var r=e.fromIndex,o=void 0===r?0:r,i=e.toIndex,n=void 0===i?t.length:i;if(o<0||o>=t.length||!Number.isInteger(o))throw Error("fromIndex must be a positive integer smaller than length");if(n<=o||n>t.length||!Number.isInteger(n))throw Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var h=t[o],u=o+1;u<n;u++)t[u]>h&&(h=t[u]);return h}(t);if(o===i)throw RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var n=r.min,h=void 0===n?r.autoMinMax?o:0:n,u=r.max,l=void 0===u?r.autoMinMax?i:1:u;if(h>=l)throw RangeError("min option must be smaller than max option");for(var a=(l-h)/(i-o),f=0;f<t.length;f++)e[f]=(t[f]-o)*a+h;return e}},31546:function(t,e,r){var s=r(12096),o=r(81080);let i=" ".repeat(2),n=" ".repeat(4);function h(t,e={}){let{maxRows:r=15,maxColumns:s=10,maxNumSize:o=8,padMinus:h="auto"}=e;return`${t.constructor.name} {
${i}[
${n}${function(t,e,r,s,o){let{rows:i,columns:h}=t,l=Math.min(i,e),a=Math.min(h,r),f=[];if("auto"===o){o=!1;t:for(let e=0;e<l;e++)for(let r=0;r<a;r++)if(0>t.get(e,r)){o=!0;break t}}for(let e=0;e<l;e++){let r=[];for(let i=0;i<a;i++){var c,m;r.push((c=t.get(e,i),m=o,(c>=0&&m?` ${u(c,s-1)}`:u(c,s)).padEnd(s)))}f.push(`${r.join(" ")}`)}return a!==h&&(f[f.length-1]+=` ... ${h-r} more columns`),l!==i&&f.push(`... ${i-e} more rows`),f.join(`
${n}`)}(t,r,s,o,h)}
${i}]
${i}rows: ${t.rows}
${i}columns: ${t.columns}
}`}function u(t,e){let r=t.toString();if(r.length<=e)return r;let s=t.toFixed(e);if(s.length>e&&(s=t.toFixed(Math.max(0,e-(s.length-e)))),s.length<=e&&!s.startsWith("0.000")&&!s.startsWith("-0.000"))return s;let o=t.toExponential(e);return o.length>e&&(o=t.toExponential(Math.max(0,e-(o.length-e)))),o.slice(0)}function l(t,e,r){let s=r?t.rows:t.rows-1;if(e<0||e>s)throw RangeError("Row index out of range")}function a(t,e,r){let s=r?t.columns:t.columns-1;if(e<0||e>s)throw RangeError("Column index out of range")}function f(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw RangeError("vector size must be the same as the number of columns");return e}function c(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw RangeError("vector size must be the same as the number of rows");return e}function m(t,e){if(!s.isAnyArray(e))throw TypeError("row indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.rows)throw RangeError("row indices are out of range")}function g(t,e){if(!s.isAnyArray(e))throw TypeError("column indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=t.columns)throw RangeError("column indices are out of range")}function w(t,e,r,s,o){if(5!=arguments.length)throw RangeError("expected 4 arguments");if(d("startRow",e),d("endRow",r),d("startColumn",s),d("endColumn",o),e>r||s>o||e<0||e>=t.rows||r<0||r>=t.rows||s<0||s>=t.columns||o<0||o>=t.columns)throw RangeError("Submatrix indices are out of range")}function p(t,e=0){let r=[];for(let s=0;s<t;s++)r.push(e);return r}function d(t,e){if("number"!=typeof e)throw TypeError(`${t} must be a number`)}function y(t){if(t.isEmpty())throw Error("Empty matrix has no elements to index")}class b{static from1DArray(t,e,r){if(t*e!==r.length)throw RangeError("data length does not match given dimensions");let s=new v(t,e);for(let o=0;o<t;o++)for(let t=0;t<e;t++)s.set(o,t,r[o*e+t]);return s}static rowVector(t){let e=new v(1,t.length);for(let r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){let e=new v(t.length,1);for(let r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static zeros(t,e){return new v(t,e)}static ones(t,e){return new v(t,e).fill(1)}static rand(t,e,r={}){if("object"!=typeof r)throw TypeError("options must be an object");let{random:s=Math.random}=r,o=new v(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)o.set(r,t,s());return o}static randInt(t,e,r={}){if("object"!=typeof r)throw TypeError("options must be an object");let{min:s=0,max:o=1e3,random:i=Math.random}=r;if(!Number.isInteger(s))throw TypeError("min must be an integer");if(!Number.isInteger(o))throw TypeError("max must be an integer");if(s>=o)throw RangeError("min must be smaller than max");let n=o-s,h=new v(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++){let e=s+Math.round(i()*n);h.set(r,t,e)}return h}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);let s=Math.min(t,e),o=this.zeros(t,e);for(let t=0;t<s;t++)o.set(t,t,r);return o}static diag(t,e,r){let s=t.length;void 0===e&&(e=s),void 0===r&&(r=e);let o=Math.min(s,e,r),i=this.zeros(e,r);for(let e=0;e<o;e++)i.set(e,e,t[e]);return i}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,s=t.columns,o=new v(r,s);for(let i=0;i<r;i++)for(let r=0;r<s;r++)o.set(i,r,Math.min(t.get(i,r),e.get(i,r)));return o}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let r=t.rows,s=t.columns,o=new this(r,s);for(let i=0;i<r;i++)for(let r=0;r<s;r++)o.set(i,r,Math.max(t.get(i,r),e.get(i,r)));return o}static checkMatrix(t){return b.isMatrix(t)?t:new v(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.call(this,e,r);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.push(this.get(e,r));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}isEchelonForm(){let t=0,e=0,r=-1,s=!0,o=!1;for(;t<this.rows&&s;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(s=!1,o=!0);t++}return s}isReducedEchelonForm(){let t=0,e=0,r=-1,s=!0,o=!1;for(;t<this.rows&&s;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(s=!1,o=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(s=!1);t++}return s}echelonForm(){let t=this.clone(),e=0,r=0;for(;e<t.rows&&r<t.columns;){let s=e;for(let o=e;o<t.rows;o++)t.get(o,r)>t.get(s,r)&&(s=o);if(0===t.get(s,r))r++;else{t.swapRows(e,s);let o=t.get(e,r);for(let s=r;s<t.columns;s++)t.set(e,s,t.get(e,s)/o);for(let s=e+1;s<t.rows;s++){let o=t.get(s,r)/t.get(e,r);t.set(s,r,0);for(let i=r+1;i<t.columns;i++)t.set(s,i,t.get(s,i)-t.get(e,i)*o)}e++,r++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,r=t.rows,s=r-1;for(;s>=0;)if(0===t.maxRow(s))s--;else{let o=0,i=!1;for(;o<r&&!1===i;)1===t.get(s,o)?i=!0:o++;for(let r=0;r<s;r++){let i=t.get(r,o);for(let n=o;n<e;n++){let e=t.get(r,n)-i*t.get(s,n);t.set(r,n,e)}}s--}return t}set(){throw Error("set method is unimplemented")}get(){throw Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw TypeError("options must be an object");let{rows:e=1,columns:r=1}=t;if(!Number.isInteger(e)||e<=0)throw TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw TypeError("columns must be a positive integer");let s=new v(this.rows*e,this.columns*r);for(let t=0;t<e;t++)for(let e=0;e<r;e++)s.setSubMatrix(this,this.rows*t,this.columns*e);return s}fill(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){l(this,t);let e=[];for(let r=0;r<this.columns;r++)e.push(this.get(t,r));return e}getRowVector(t){return v.rowVector(this.getRow(t))}setRow(t,e){l(this,t),e=f(this,e);for(let r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){l(this,t),l(this,e);for(let r=0;r<this.columns;r++){let s=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,s)}return this}getColumn(t){a(this,t);let e=[];for(let r=0;r<this.rows;r++)e.push(this.get(r,t));return e}getColumnVector(t){return v.columnVector(this.getColumn(t))}setColumn(t,e){a(this,t),e=c(this,e);for(let r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){a(this,t),a(this,e);for(let r=0;r<this.rows;r++){let s=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,s)}return this}addRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=f(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=c(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=c(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=c(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=c(this,t);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){l(this,t);for(let r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){a(this,t);for(let r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(t){if(this.isEmpty())return NaN;switch(t){case"row":{let t=Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[e]&&(t[e]=this.get(e,r));return t}case"column":{let t=Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}default:throw Error(`invalid option: ${t}`)}}maxIndex(){y(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.get(r,s)>t&&(t=this.get(r,s),e[0]=r,e[1]=s);return e}min(t){if(this.isEmpty())return NaN;switch(t){case"row":{let t=Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[e]&&(t[e]=this.get(e,r));return t}case"column":{let t=Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t[r]&&(t[r]=this.get(e,r));return t}case void 0:{let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}default:throw Error(`invalid option: ${t}`)}}minIndex(){y(this);let t=this.get(0,0),e=[0,0];for(let r=0;r<this.rows;r++)for(let s=0;s<this.columns;s++)this.get(r,s)<t&&(t=this.get(r,s),e[0]=r,e[1]=s);return e}maxRow(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){l(this,t),y(this);let e=this.get(t,0),r=[t,0];for(let s=1;s<this.columns;s++)this.get(t,s)>e&&(e=this.get(t,s),r[1]=s);return r}minRow(t){if(l(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){l(this,t),y(this);let e=this.get(t,0),r=[t,0];for(let s=1;s<this.columns;s++)this.get(t,s)<e&&(e=this.get(t,s),r[1]=s);return r}maxColumn(t){if(a(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){a(this,t),y(this);let e=this.get(0,t),r=[0,t];for(let s=1;s<this.rows;s++)this.get(s,t)>e&&(e=this.get(s,t),r[0]=s);return r}minColumn(t){if(a(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){a(this,t),y(this);let e=this.get(0,t),r=[0,t];for(let s=1;s<this.rows;s++)this.get(s,t)<e&&(e=this.get(s,t),r[0]=s);return r}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let r=0;r<t;r++)e.push(this.get(r,r));return e}norm(t="frobenius"){switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw RangeError(`unknown norm type: ${t}`)}}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){b.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw RangeError("vectors do not have the same size");let r=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s];return r}mmul(t){t=v.checkMatrix(t);let e=this.rows,r=this.columns,s=t.columns,o=new v(e,s),i=new Float64Array(r);for(let n=0;n<s;n++){for(let e=0;e<r;e++)i[e]=t.get(e,n);for(let t=0;t<e;t++){let e=0;for(let s=0;s<r;s++)e+=this.get(t,s)*i[s];o.set(t,n,e)}}return o}strassen2x2(t){t=v.checkMatrix(t);let e=new v(2,2),r=this.get(0,0),s=t.get(0,0),o=this.get(0,1),i=t.get(0,1),n=this.get(1,0),h=t.get(1,0),u=this.get(1,1),l=t.get(1,1),a=(r+u)*(s+l),f=(n+u)*s,c=r*(i-l),m=u*(h-s),g=(r+o)*l;return e.set(0,0,a+m-g+(o-u)*(h+l)),e.set(0,1,c+g),e.set(1,0,f+m),e.set(1,1,a-f+c+(n-r)*(s+i)),e}strassen3x3(t){t=v.checkMatrix(t);let e=new v(3,3),r=this.get(0,0),s=this.get(0,1),o=this.get(0,2),i=this.get(1,0),n=this.get(1,1),h=this.get(1,2),u=this.get(2,0),l=this.get(2,1),a=this.get(2,2),f=t.get(0,0),c=t.get(0,1),m=t.get(0,2),g=t.get(1,0),w=t.get(1,1),p=t.get(1,2),d=t.get(2,0),y=t.get(2,1),b=t.get(2,2),M=(r-i)*(-c+w),x=(-r+i+n)*(f-c+w),E=(i+n)*(-f+c),S=r*f,I=(-r+u+l)*(f-m+p),T=(-r+u)*(m-p),R=(u+l)*(-f+m),A=(-o+l+a)*(w+d-y),k=(o-a)*(w-y),N=o*d,C=(l+a)*(-d+y),q=(-o+n+h)*(p+d-b),V=(o-h)*(p-b),D=(n+h)*(-d+b);return e.set(0,0,S+N+s*g),e.set(0,1,(r+s+o-i-n-l-a)*w+x+E+S+A+N+C),e.set(0,2,S+I+R+(r+s+o-n-h-u-l)*p+N+q+D),e.set(1,0,M+n*(-f+c+g-w-p-d+b)+x+S+N+q+V),e.set(1,1,M+x+E+S+h*y),e.set(1,2,N+q+V+D+i*m),e.set(2,0,S+I+T+l*(-f+m+g-w-p-d+y)+A+k+N),e.set(2,1,A+k+N+C+u*c),e.set(2,2,S+I+T+R+a*b),e}mmulStrassen(t){t=v.checkMatrix(t);let e=this.clone(),r=e.rows,s=e.columns,o=t.rows,i=t.columns;function n(t,e,r){let s=t.rows,o=t.columns;return s===e&&o===r?t:b.zeros(e,r).setSubMatrix(t,0,0)}s!==o&&console.warn(`Multiplying ${r} x ${s} and ${o} x ${i} matrix: dimensions do not match.`);let h=Math.max(r,o),u=Math.max(s,i);return function t(e,r,s,o){if(s<=512||o<=512)return e.mmul(r);s%2==1&&o%2==1?(e=n(e,s+1,o+1),r=n(r,s+1,o+1)):s%2==1?(e=n(e,s+1,o),r=n(r,s+1,o)):o%2==1&&(e=n(e,s,o+1),r=n(r,s,o+1));let i=parseInt(e.rows/2,10),h=parseInt(e.columns/2,10),u=e.subMatrix(0,i-1,0,h-1),l=r.subMatrix(0,i-1,0,h-1),a=e.subMatrix(0,i-1,h,e.columns-1),f=r.subMatrix(0,i-1,h,r.columns-1),c=e.subMatrix(i,e.rows-1,0,h-1),m=r.subMatrix(i,r.rows-1,0,h-1),g=e.subMatrix(i,e.rows-1,h,e.columns-1),w=r.subMatrix(i,r.rows-1,h,r.columns-1),p=t(b.add(u,g),b.add(l,w),i,h),d=t(b.add(c,g),l,i,h),y=t(u,b.sub(f,w),i,h),M=t(g,b.sub(m,l),i,h),v=t(b.add(u,a),w,i,h),x=t(b.sub(c,u),b.add(l,f),i,h),E=t(b.sub(a,g),b.add(m,w),i,h),S=b.add(p,M);S.sub(v),S.add(E);let I=b.add(y,v),T=b.add(d,M),R=b.sub(p,d);R.add(y),R.add(x);let A=b.zeros(2*S.rows,2*S.columns);return(A=(A=(A=(A=A.setSubMatrix(S,0,0)).setSubMatrix(I,S.rows,0)).setSubMatrix(T,0,S.columns)).setSubMatrix(R,S.rows,S.columns)).subMatrix(0,s-1,0,o-1)}(e=n(e,h,u),t=n(t,h,u),h,u)}scaleRows(t={}){if("object"!=typeof t)throw TypeError("options must be an object");let{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw TypeError("min must be a number");if(!Number.isFinite(r))throw TypeError("max must be a number");if(e>=r)throw RangeError("min must be smaller than max");let s=new v(this.rows,this.columns);for(let t=0;t<this.rows;t++){let i=this.getRow(t);i.length>0&&o(i,{min:e,max:r,output:i}),s.setRow(t,i)}return s}scaleColumns(t={}){if("object"!=typeof t)throw TypeError("options must be an object");let{min:e=0,max:r=1}=t;if(!Number.isFinite(e))throw TypeError("min must be a number");if(!Number.isFinite(r))throw TypeError("max must be a number");if(e>=r)throw RangeError("min must be smaller than max");let s=new v(this.rows,this.columns);for(let t=0;t<this.columns;t++){let i=this.getColumn(t);i.length&&o(i,{min:e,max:r,output:i}),s.setColumn(t,i)}return s}flipRows(){let t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let r=0;r<t;r++){let t=this.get(e,r),s=this.get(e,this.columns-1-r);this.set(e,r,s),this.set(e,this.columns-1-r,t)}return this}flipColumns(){let t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let r=0;r<t;r++){let t=this.get(r,e),s=this.get(this.rows-1-r,e);this.set(r,e,s),this.set(this.rows-1-r,e,t)}return this}kroneckerProduct(t){t=v.checkMatrix(t);let e=this.rows,r=this.columns,s=t.rows,o=t.columns,i=new v(e*s,r*o);for(let n=0;n<e;n++)for(let e=0;e<r;e++)for(let r=0;r<s;r++)for(let h=0;h<o;h++)i.set(s*n+r,o*e+h,this.get(n,e)*t.get(r,h));return i}kroneckerSum(t){if(t=v.checkMatrix(t),!this.isSquare()||!t.isSquare())throw Error("Kronecker Sum needs two Square Matrices");let e=this.rows,r=t.rows,s=this.kroneckerProduct(v.eye(r,r)),o=v.eye(e,e).kroneckerProduct(t);return s.add(o)}transpose(){let t=new v(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t=M){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=M){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,s){w(this,t,e,r,s);let o=new v(e-t+1,s-r+1);for(let i=t;i<=e;i++)for(let e=r;e<=s;e++)o.set(i-t,e-r,this.get(i,e));return o}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw RangeError("Argument out of range");let s=new v(t.length,r-e+1);for(let o=0;o<t.length;o++)for(let i=e;i<=r;i++){if(t[o]<0||t[o]>=this.rows)throw RangeError(`Row index out of range: ${t[o]}`);s.set(o,i-e,this.get(t[o],i))}return s}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw RangeError("Argument out of range");let s=new v(r-e+1,t.length);for(let o=0;o<t.length;o++)for(let i=e;i<=r;i++){if(t[o]<0||t[o]>=this.columns)throw RangeError(`Column index out of range: ${t[o]}`);s.set(i-e,o,this.get(i,t[o]))}return s}setSubMatrix(t,e,r){if((t=v.checkMatrix(t)).isEmpty())return this;let s=e+t.rows-1,o=r+t.columns-1;w(this,e,s,r,o);for(let s=0;s<t.rows;s++)for(let o=0;o<t.columns;o++)this.set(e+s,r+o,t.get(s,o));return this}selection(t,e){m(this,t),g(this,e);let r=new v(t.length,e.length);for(let s=0;s<t.length;s++){let o=t[s];for(let t=0;t<e.length;t++){let i=e[t];r.set(s,t,this.get(o,i))}}return r}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let r=0;r<t;r++)e+=this.get(r,r);return e}clone(){return this.constructor.copy(this,new v(this.rows,this.columns))}static copy(t,e){for(let[r,s,o]of t.entries())e.set(r,s,o);return e}sum(t){switch(t){case"row":return function(t){let e=p(t.rows);for(let r=0;r<t.rows;++r)for(let s=0;s<t.columns;++s)e[r]+=t.get(r,s);return e}(this);case"column":return function(t){let e=p(t.columns);for(let r=0;r<t.rows;++r)for(let s=0;s<t.columns;++s)e[s]+=t.get(r,s);return e}(this);case void 0:return function(t){let e=0;for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)e+=t.get(r,s);return e}(this);default:throw Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=p(t.rows,1);for(let r=0;r<t.rows;++r)for(let s=0;s<t.columns;++s)e[r]*=t.get(r,s);return e}(this);case"column":return function(t){let e=p(t.columns,1);for(let r=0;r<t.rows;++r)for(let s=0;s<t.columns;++s)e[s]*=t.get(r,s);return e}(this);case void 0:return function(t){let e=1;for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)e*=t.get(r,s);return e}(this);default:throw Error(`invalid option: ${t}`)}}mean(t){let e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw TypeError("options must be an object");let{unbiased:r=!0,mean:o=this.mean(t)}=e;if("boolean"!=typeof r)throw TypeError("unbiased must be a boolean");switch(t){case"row":if(!s.isAnyArray(o))throw TypeError("mean must be an array");return function(t,e,r){let s=t.rows,o=t.columns,i=[];for(let n=0;n<s;n++){let s=0,h=0,u=0;for(let e=0;e<o;e++)s+=u=t.get(n,e)-r[n],h+=u*u;e?i.push((h-s*s/o)/(o-1)):i.push((h-s*s/o)/o)}return i}(this,r,o);case"column":if(!s.isAnyArray(o))throw TypeError("mean must be an array");return function(t,e,r){let s=t.rows,o=t.columns,i=[];for(let n=0;n<o;n++){let o=0,h=0,u=0;for(let e=0;e<s;e++)o+=u=t.get(e,n)-r[n],h+=u*u;e?i.push((h-o*o/s)/(s-1)):i.push((h-o*o/s)/s)}return i}(this,r,o);case void 0:if("number"!=typeof o)throw TypeError("mean must be a number");return function(t,e,r){let s=t.rows,o=t.columns,i=s*o,n=0,h=0,u=0;for(let e=0;e<s;e++)for(let s=0;s<o;s++)n+=u=t.get(e,s)-r,h+=u*u;return e?(h-n*n/i)/(i-1):(h-n*n/i)/i}(this,r,o);default:throw Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);let r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(let t=0;t<r.length;t++)r[t]=Math.sqrt(r[t]);return r}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw TypeError("options must be an object");let{center:r=this.mean(t)}=e;switch(t){case"row":if(!s.isAnyArray(r))throw TypeError("center must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)t.set(r,s,t.get(r,s)-e[r])}(this,r),this;case"column":if(!s.isAnyArray(r))throw TypeError("center must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)t.set(r,s,t.get(r,s)-e[s])}(this,r),this;case void 0:if("number"!=typeof r)throw TypeError("center must be a number");return!function(t,e){for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)t.set(r,s,t.get(r,s)-e)}(this,r),this;default:throw Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw TypeError("options must be an object");let r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){let e=[];for(let r=0;r<t.rows;r++){let s=0;for(let e=0;e<t.columns;e++)s+=Math.pow(t.get(r,e),2)/(t.columns-1);e.push(Math.sqrt(s))}return e}(this);else if(!s.isAnyArray(r))throw TypeError("scale must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)t.set(r,s,t.get(r,s)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){let e=[];for(let r=0;r<t.columns;r++){let s=0;for(let e=0;e<t.rows;e++)s+=Math.pow(t.get(e,r),2)/(t.rows-1);e.push(Math.sqrt(s))}return e}(this);else if(!s.isAnyArray(r))throw TypeError("scale must be an array");return!function(t,e){for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)t.set(r,s,t.get(r,s)/e[s])}(this,r),this;case void 0:if(void 0===r)r=function(t){let e=t.size-1,r=0;for(let s=0;s<t.columns;s++)for(let o=0;o<t.rows;o++)r+=Math.pow(t.get(o,s),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw TypeError("scale must be a number");return!function(t,e){for(let r=0;r<t.rows;r++)for(let s=0;s<t.columns;s++)t.set(r,s,t.get(r,s)/e)}(this,r),this;default:throw Error(`invalid option: ${t}`)}}toString(t){return h(this,t)}[Symbol.iterator](){return this.entries()}*entries(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield[t,e,this.get(t,e)]}*values(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)yield this.get(t,e)}}function M(t,e){return t-e}b.prototype.klass="Matrix","undefined"!=typeof Symbol&&(b.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return h(this)}),b.random=b.rand,b.randomInt=b.randInt,b.diagonal=b.diag,b.prototype.diagonal=b.prototype.diag,b.identity=b.eye,b.prototype.negate=b.prototype.neg,b.prototype.tensorProduct=b.prototype.kroneckerProduct;class v extends b{data;#t(t,e){if(this.data=[],Number.isInteger(e)&&e>=0)for(let r=0;r<t;r++)this.data.push(new Float64Array(e));else throw TypeError("nColumns must be a positive integer");this.rows=t,this.columns=e}constructor(t,e){if(super(),v.isMatrix(t))this.#t(t.rows,t.columns),v.copy(t,this);else if(Number.isInteger(t)&&t>=0)this.#t(t,e);else if(s.isAnyArray(t)){let r=t;if("number"!=typeof(e=(t=r.length)?r[0].length:0))throw TypeError("Data must be a 2D array with at least one element");this.data=[];for(let s=0;s<t;s++){if(r[s].length!==e)throw RangeError("Inconsistent array dimensions");if(!r[s].every(t=>"number"==typeof t))throw TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[s]))}this.rows=t,this.columns=e}else throw TypeError("First argument must be a positive number or an array")}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}removeRow(t){return l(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),l(this,t,!0),e=Float64Array.from(f(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){a(this,t);for(let e=0;e<this.rows;e++){let r=new Float64Array(this.columns-1);for(let s=0;s<t;s++)r[s]=this.data[e][s];for(let s=t+1;s<this.columns;s++)r[s-1]=this.data[e][s];this.data[e]=r}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),a(this,t,!0),e=c(this,e);for(let r=0;r<this.rows;r++){let s=new Float64Array(this.columns+1),o=0;for(;o<t;o++)s[o]=this.data[r][o];for(s[o++]=e[r];o<this.columns+1;o++)s[o]=this.data[r][o-1];this.data[r]=s}return this.columns+=1,this}}b.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},b.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},b.prototype.addM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},b.add=function(t,e){return new v(t).add(e)},b.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},b.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},b.prototype.subM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},b.sub=function(t,e){return new v(t).sub(e)},b.prototype.subtract=b.prototype.sub,b.prototype.subtractS=b.prototype.subS,b.prototype.subtractM=b.prototype.subM,b.subtract=b.sub,b.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},b.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},b.prototype.mulM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},b.mul=function(t,e){return new v(t).mul(e)},b.prototype.multiply=b.prototype.mul,b.prototype.multiplyS=b.prototype.mulS,b.prototype.multiplyM=b.prototype.mulM,b.multiply=b.mul,b.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},b.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},b.prototype.divM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},b.div=function(t,e){return new v(t).div(e)},b.prototype.divide=b.prototype.div,b.prototype.divideS=b.prototype.divS,b.prototype.divideM=b.prototype.divM,b.divide=b.div,b.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},b.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},b.prototype.modM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},b.mod=function(t,e){return new v(t).mod(e)},b.prototype.modulus=b.prototype.mod,b.prototype.modulusS=b.prototype.modS,b.prototype.modulusM=b.prototype.modM,b.modulus=b.mod,b.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},b.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},b.prototype.andM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},b.and=function(t,e){return new v(t).and(e)},b.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},b.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},b.prototype.orM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},b.or=function(t,e){return new v(t).or(e)},b.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},b.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},b.prototype.xorM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},b.xor=function(t,e){return new v(t).xor(e)},b.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},b.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},b.prototype.leftShiftM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},b.leftShift=function(t,e){return new v(t).leftShift(e)},b.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},b.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},b.prototype.signPropagatingRightShiftM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},b.signPropagatingRightShift=function(t,e){return new v(t).signPropagatingRightShift(e)},b.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},b.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},b.prototype.rightShiftM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},b.rightShift=function(t,e){return new v(t).rightShift(e)},b.prototype.zeroFillRightShift=b.prototype.rightShift,b.prototype.zeroFillRightShiftS=b.prototype.rightShiftS,b.prototype.zeroFillRightShiftM=b.prototype.rightShiftM,b.zeroFillRightShift=b.rightShift,b.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},b.not=function(t){return new v(t).not()},b.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},b.abs=function(t){return new v(t).abs()},b.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},b.acos=function(t){return new v(t).acos()},b.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},b.acosh=function(t){return new v(t).acosh()},b.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},b.asin=function(t){return new v(t).asin()},b.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},b.asinh=function(t){return new v(t).asinh()},b.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},b.atan=function(t){return new v(t).atan()},b.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},b.atanh=function(t){return new v(t).atanh()},b.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},b.cbrt=function(t){return new v(t).cbrt()},b.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},b.ceil=function(t){return new v(t).ceil()},b.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},b.clz32=function(t){return new v(t).clz32()},b.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},b.cos=function(t){return new v(t).cos()},b.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},b.cosh=function(t){return new v(t).cosh()},b.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},b.exp=function(t){return new v(t).exp()},b.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},b.expm1=function(t){return new v(t).expm1()},b.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},b.floor=function(t){return new v(t).floor()},b.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},b.fround=function(t){return new v(t).fround()},b.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},b.log=function(t){return new v(t).log()},b.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},b.log1p=function(t){return new v(t).log1p()},b.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},b.log10=function(t){return new v(t).log10()},b.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},b.log2=function(t){return new v(t).log2()},b.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},b.round=function(t){return new v(t).round()},b.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},b.sign=function(t){return new v(t).sign()},b.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},b.sin=function(t){return new v(t).sin()},b.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},b.sinh=function(t){return new v(t).sinh()},b.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},b.sqrt=function(t){return new v(t).sqrt()},b.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},b.tan=function(t){return new v(t).tan()},b.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},b.tanh=function(t){return new v(t).tanh()},b.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},b.trunc=function(t){return new v(t).trunc()},b.pow=function(t,e){return new v(t).pow(e)},b.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},b.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},b.prototype.powM=function(t){if(t=v.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this};class x extends b{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(t){return v.isMatrix(t)&&"SymmetricMatrix"===t.klassType}static zeros(t){return new this(t)}static ones(t){return new this(t).fill(1)}constructor(t){if(super(),v.isMatrix(t)){if(!t.isSymmetric())throw TypeError("not symmetric data");this.#e=v.copy(t,new v(t.rows,t.rows))}else if(Number.isInteger(t)&&t>=0)this.#e=new v(t,t);else if(this.#e=new v(t),!this.isSymmetric())throw TypeError("not symmetric data")}clone(){let t=new x(this.diagonalSize);for(let[e,r,s]of this.upperRightEntries())t.set(e,r,s);return t}toMatrix(){return new v(this)}get(t,e){return this.#e.get(t,e)}set(t,e,r){return this.#e.set(t,e,r),this.#e.set(e,t,r),this}removeCross(t){return this.#e.removeRow(t),this.#e.removeColumn(t),this}addCross(t,e){void 0===e&&(e=t,t=this.diagonalSize);let r=e.slice();return r.splice(t,1),this.#e.addRow(t,r),this.#e.addColumn(t,e),this}applyMask(t){if(t.length!==this.diagonalSize)throw RangeError("Mask size do not match with matrix size");let e=[];for(let[r,s]of t.entries())s||e.push(r);for(let t of(e.reverse(),e))this.removeCross(t);return this}toCompact(){let{diagonalSize:t}=this,e=Array(t*(t+1)/2);for(let r=0,s=0,o=0;o<e.length;o++)e[o]=this.get(s,r),++r>=t&&(r=++s);return e}static fromCompact(t){let e=t.length,r=(Math.sqrt(8*e+1)-1)/2;if(!Number.isInteger(r))throw TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(t)}`);let s=new x(r);for(let o=0,i=0,n=0;n<e;n++)s.set(o,i,t[n]),++o>=r&&(o=++i);return s}*upperRightEntries(){for(let t=0,e=0;t<this.diagonalSize;){let r=this.get(t,e);yield[t,e,r],++e>=this.diagonalSize&&(e=++t)}}*upperRightValues(){for(let t=0,e=0;t<this.diagonalSize;){let r=this.get(t,e);yield r,++e>=this.diagonalSize&&(e=++t)}}}x.prototype.klassType="SymmetricMatrix";class E extends x{static isDistanceMatrix(t){return x.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}constructor(t){if(super(t),!this.isDistance())throw TypeError("Provided arguments do no produce a distance matrix")}set(t,e,r){return t===e&&(r=0),super.set(t,e,r)}addCross(t,e){return void 0===e&&(e=t,t=this.diagonalSize),(e=e.slice())[t]=0,super.addCross(t,e)}toSymmetricMatrix(){return new x(this)}clone(){let t=new E(this.diagonalSize);for(let[e,r,s]of this.upperRightEntries())e!==r&&t.set(e,r,s);return t}toCompact(){let{diagonalSize:t}=this,e=Array((t-1)*t/2);for(let r=1,s=0,o=0;o<e.length;o++)e[o]=this.get(s,r),++r>=t&&(r=++s+1);return e}static fromCompact(t){let e=t.length,r=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(r))throw TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(t)}`);let s=new this(r);for(let o=1,i=0,n=0;n<e;n++)s.set(o,i,t[n]),++o>=r&&(o=++i+1);return s}}E.prototype.klassSubType="DistanceMatrix";class S extends b{constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}}class I extends S{constructor(t,e){a(t,e),super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}class T extends S{constructor(t,e){g(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class R extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class A extends S{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class k extends S{constructor(t,e){l(t,e),super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}class N extends S{constructor(t,e){m(t,e),super(t,e.length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class C extends S{constructor(t,e,r){m(t,e),g(t,r),super(t,e.length,r.length),this.rowIndices=e,this.columnIndices=r}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class q extends S{constructor(t,e,r,s,o){w(t,e,r,s,o),super(t,r-e+1,o-s+1),this.startRow=e,this.startColumn=s}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class V extends S{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}class D extends b{constructor(t,e={}){let{rows:r=1}=e;if(t.length%r!=0)throw Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){let s=this._calculateIndex(t,e);return this.data[s]=r,this}get(t,e){let r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}}class P extends b{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}class F{constructor(t){let e,r,s,o,i,n,h,u,l;let a=(t=P.checkMatrix(t)).clone(),f=a.rows,c=a.columns,m=new Float64Array(f),g=1;for(e=0;e<f;e++)m[e]=e;for(r=0,u=new Float64Array(f);r<c;r++){for(e=0;e<f;e++)u[e]=a.get(e,r);for(e=0;e<f;e++){for(s=0,l=Math.min(e,r),i=0;s<l;s++)i+=a.get(e,s)*u[s];u[e]-=i,a.set(e,r,u[e])}for(o=r,e=r+1;e<f;e++)Math.abs(u[e])>Math.abs(u[o])&&(o=e);if(o!==r){for(s=0;s<c;s++)n=a.get(o,s),a.set(o,s,a.get(r,s)),a.set(r,s,n);h=m[o],m[o]=m[r],m[r]=h,g=-g}if(r<f&&0!==a.get(r,r))for(e=r+1;e<f;e++)a.set(e,r,a.get(e,r)/a.get(r,r))}this.LU=a,this.pivotVector=m,this.pivotSign=g}isSingular(){let t=this.LU,e=t.columns;for(let r=0;r<e;r++)if(0===t.get(r,r))return!0;return!1}solve(t){let e,r,s;t=v.checkMatrix(t);let o=this.LU;if(o.rows!==t.rows)throw Error("Invalid matrix dimensions");if(this.isSingular())throw Error("LU matrix is singular");let i=t.columns,n=t.subMatrixRow(this.pivotVector,0,i-1),h=o.columns;for(s=0;s<h;s++)for(e=s+1;e<h;e++)for(r=0;r<i;r++)n.set(e,r,n.get(e,r)-n.get(s,r)*o.get(e,s));for(s=h-1;s>=0;s--){for(r=0;r<i;r++)n.set(s,r,n.get(s,r)/o.get(s,s));for(e=0;e<s;e++)for(r=0;r<i;r++)n.set(e,r,n.get(e,r)-n.get(s,r)*o.get(e,s))}return n}get determinant(){let t=this.LU;if(!t.isSquare())throw Error("Matrix must be square");let e=this.pivotSign,r=t.columns;for(let s=0;s<r;s++)e*=t.get(s,s);return e}get lowerTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,s=new v(e,r);for(let o=0;o<e;o++)for(let e=0;e<r;e++)o>e?s.set(o,e,t.get(o,e)):o===e?s.set(o,e,1):s.set(o,e,0);return s}get upperTriangularMatrix(){let t=this.LU,e=t.rows,r=t.columns,s=new v(e,r);for(let o=0;o<e;o++)for(let e=0;e<r;e++)o<=e?s.set(o,e,t.get(o,e)):s.set(o,e,0);return s}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function z(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class _{constructor(t){let e,r,s,o;let i=(t=P.checkMatrix(t)).clone(),n=t.rows,h=t.columns,u=new Float64Array(h);for(s=0;s<h;s++){let t=0;for(e=s;e<n;e++)t=z(t,i.get(e,s));if(0!==t){for(0>i.get(s,s)&&(t=-t),e=s;e<n;e++)i.set(e,s,i.get(e,s)/t);for(i.set(s,s,i.get(s,s)+1),r=s+1;r<h;r++){for(o=0,e=s;e<n;e++)o+=i.get(e,s)*i.get(e,r);for(o=-o/i.get(s,s),e=s;e<n;e++)i.set(e,r,i.get(e,r)+o*i.get(e,s))}}u[s]=-t}this.QR=i,this.Rdiag=u}solve(t){let e,r,s,o;t=v.checkMatrix(t);let i=this.QR,n=i.rows;if(t.rows!==n)throw Error("Matrix row dimensions must agree");if(!this.isFullRank())throw Error("Matrix is rank deficient");let h=t.columns,u=t.clone(),l=i.columns;for(s=0;s<l;s++)for(r=0;r<h;r++){for(o=0,e=s;e<n;e++)o+=i.get(e,s)*u.get(e,r);for(o=-o/i.get(s,s),e=s;e<n;e++)u.set(e,r,u.get(e,r)+o*i.get(e,s))}for(s=l-1;s>=0;s--){for(r=0;r<h;r++)u.set(s,r,u.get(s,r)/this.Rdiag[s]);for(e=0;e<s;e++)for(r=0;r<h;r++)u.set(e,r,u.get(e,r)-u.get(s,r)*i.get(e,s))}return u.subMatrix(0,l-1,0,h-1)}isFullRank(){let t=this.QR.columns;for(let e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}get upperTriangularMatrix(){let t,e,r=this.QR,s=r.columns,o=new v(s,s);for(t=0;t<s;t++)for(e=0;e<s;e++)t<e?o.set(t,e,r.get(t,e)):t===e?o.set(t,e,this.Rdiag[t]):o.set(t,e,0);return o}get orthogonalMatrix(){let t,e,r,s,o=this.QR,i=o.rows,n=o.columns,h=new v(i,n);for(r=n-1;r>=0;r--){for(t=0;t<i;t++)h.set(t,r,0);for(h.set(r,r,1),e=r;e<n;e++)if(0!==o.get(r,r)){for(s=0,t=r;t<i;t++)s+=o.get(t,r)*h.get(t,e);for(s=-s/o.get(r,r),t=r;t<i;t++)h.set(t,e,h.get(t,e)+s*o.get(t,r))}}return h}}class L{constructor(t,e={}){let r;if((t=P.checkMatrix(t)).isEmpty())throw Error("Matrix must be non-empty");let s=t.rows,o=t.columns,{computeLeftSingularVectors:i=!0,computeRightSingularVectors:n=!0,autoTranspose:h=!1}=e,u=!!i,l=!!n,a=!1;if(s<o){if(h){s=(r=t.transpose()).rows,o=r.columns,a=!0;let e=u;u=l,l=e}else r=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose")}else r=t.clone();let f=Math.min(s,o),c=Math.min(s+1,o),m=new Float64Array(c),g=new v(s,f),w=new v(o,o),p=new Float64Array(o),d=new Float64Array(s),y=new Float64Array(c);for(let t=0;t<c;t++)y[t]=t;let b=Math.min(s-1,o),M=Math.max(0,Math.min(o-2,s)),x=Math.max(b,M);for(let t=0;t<x;t++){if(t<b){m[t]=0;for(let e=t;e<s;e++)m[t]=z(m[t],r.get(e,t));if(0!==m[t]){0>r.get(t,t)&&(m[t]=-m[t]);for(let e=t;e<s;e++)r.set(e,t,r.get(e,t)/m[t]);r.set(t,t,r.get(t,t)+1)}m[t]=-m[t]}for(let e=t+1;e<o;e++){if(t<b&&0!==m[t]){let o=0;for(let i=t;i<s;i++)o+=r.get(i,t)*r.get(i,e);o=-o/r.get(t,t);for(let i=t;i<s;i++)r.set(i,e,r.get(i,e)+o*r.get(i,t))}p[e]=r.get(t,e)}if(u&&t<b)for(let e=t;e<s;e++)g.set(e,t,r.get(e,t));if(t<M){p[t]=0;for(let e=t+1;e<o;e++)p[t]=z(p[t],p[e]);if(0!==p[t]){p[t+1]<0&&(p[t]=0-p[t]);for(let e=t+1;e<o;e++)p[e]/=p[t];p[t+1]+=1}if(p[t]=-p[t],t+1<s&&0!==p[t]){for(let e=t+1;e<s;e++)d[e]=0;for(let e=t+1;e<s;e++)for(let s=t+1;s<o;s++)d[e]+=p[s]*r.get(e,s);for(let e=t+1;e<o;e++){let o=-p[e]/p[t+1];for(let i=t+1;i<s;i++)r.set(i,e,r.get(i,e)+o*d[i])}}if(l)for(let e=t+1;e<o;e++)w.set(e,t,p[e])}}let E=Math.min(o,s+1);if(b<o&&(m[b]=r.get(b,b)),s<E&&(m[E-1]=0),M+1<E&&(p[M]=r.get(M,E-1)),p[E-1]=0,u){for(let t=b;t<f;t++){for(let e=0;e<s;e++)g.set(e,t,0);g.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==m[t]){for(let e=t+1;e<f;e++){let r=0;for(let o=t;o<s;o++)r+=g.get(o,t)*g.get(o,e);r=-r/g.get(t,t);for(let o=t;o<s;o++)g.set(o,e,g.get(o,e)+r*g.get(o,t))}for(let e=t;e<s;e++)g.set(e,t,-g.get(e,t));g.set(t,t,1+g.get(t,t));for(let e=0;e<t-1;e++)g.set(e,t,0)}else{for(let e=0;e<s;e++)g.set(e,t,0);g.set(t,t,1)}}if(l)for(let t=o-1;t>=0;t--){if(t<M&&0!==p[t])for(let e=t+1;e<o;e++){let r=0;for(let s=t+1;s<o;s++)r+=w.get(s,t)*w.get(s,e);r=-r/w.get(t+1,t);for(let s=t+1;s<o;s++)w.set(s,e,w.get(s,e)+r*w.get(s,t))}for(let e=0;e<o;e++)w.set(e,t,0);w.set(t,t,1)}let S=E-1,I=Number.EPSILON;for(;E>0;){let t,e;for(t=E-2;t>=-1&&-1!==t;t--){let e=Number.MIN_VALUE+I*Math.abs(m[t]+Math.abs(m[t+1]));if(Math.abs(p[t])<=e||Number.isNaN(p[t])){p[t]=0;break}}if(t===E-2)e=4;else{let r;for(r=E-1;r>=t&&r!==t;r--){let e=(r!==E?Math.abs(p[r]):0)+(r!==t+1?Math.abs(p[r-1]):0);if(Math.abs(m[r])<=I*e){m[r]=0;break}}r===t?e=3:r===E-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=p[E-2];p[E-2]=0;for(let r=E-2;r>=t;r--){let s=z(m[r],e),i=m[r]/s,n=e/s;if(m[r]=s,r!==t&&(e=-n*p[r-1],p[r-1]=i*p[r-1]),l)for(let t=0;t<o;t++)s=i*w.get(t,r)+n*w.get(t,E-1),w.set(t,E-1,-n*w.get(t,r)+i*w.get(t,E-1)),w.set(t,r,s)}break}case 2:{let e=p[t-1];p[t-1]=0;for(let r=t;r<E;r++){let o=z(m[r],e),i=m[r]/o,n=e/o;if(m[r]=o,e=-n*p[r],p[r]=i*p[r],u)for(let e=0;e<s;e++)o=i*g.get(e,r)+n*g.get(e,t-1),g.set(e,t-1,-n*g.get(e,r)+i*g.get(e,t-1)),g.set(e,r,o)}break}case 3:{let e=Math.max(Math.abs(m[E-1]),Math.abs(m[E-2]),Math.abs(p[E-2]),Math.abs(m[t]),Math.abs(p[t])),r=m[E-1]/e,i=m[E-2]/e,n=p[E-2]/e,h=m[t]/e,a=p[t]/e,f=((i+r)*(i-r)+n*n)/2,c=r*n*(r*n),d=0;(0!==f||0!==c)&&(d=f<0?0-Math.sqrt(f*f+c):Math.sqrt(f*f+c),d=c/(f+d));let y=(h+r)*(h-r)+d,b=h*a;for(let e=t;e<E-1;e++){let r=z(y,b);0===r&&(r=Number.MIN_VALUE);let i=y/r,n=b/r;if(e!==t&&(p[e-1]=r),y=i*m[e]+n*p[e],p[e]=i*p[e]-n*m[e],b=n*m[e+1],m[e+1]=i*m[e+1],l)for(let t=0;t<o;t++)r=i*w.get(t,e)+n*w.get(t,e+1),w.set(t,e+1,-n*w.get(t,e)+i*w.get(t,e+1)),w.set(t,e,r);if(0===(r=z(y,b))&&(r=Number.MIN_VALUE),i=y/r,n=b/r,m[e]=r,y=i*p[e]+n*m[e+1],m[e+1]=-n*p[e]+i*m[e+1],b=n*p[e+1],p[e+1]=i*p[e+1],u&&e<s-1)for(let t=0;t<s;t++)r=i*g.get(t,e)+n*g.get(t,e+1),g.set(t,e+1,-n*g.get(t,e)+i*g.get(t,e+1)),g.set(t,e,r)}p[E-2]=y;break}case 4:if(m[t]<=0&&(m[t]=m[t]<0?-m[t]:0,l))for(let e=0;e<=S;e++)w.set(e,t,-w.get(e,t));for(;t<S&&!(m[t]>=m[t+1]);){let e=m[t];if(m[t]=m[t+1],m[t+1]=e,l&&t<o-1)for(let r=0;r<o;r++)e=w.get(r,t+1),w.set(r,t+1,w.get(r,t)),w.set(r,t,e);if(u&&t<s-1)for(let r=0;r<s;r++)e=g.get(r,t+1),g.set(r,t+1,g.get(r,t)),g.set(r,t,e);t++}E--}}if(a){let t=w;w=g,g=t}this.m=s,this.n=o,this.s=m,this.U=g,this.V=w}solve(t){let e=this.threshold,r=this.s.length,s=v.zeros(r,r);for(let t=0;t<r;t++)Math.abs(this.s[t])<=e?s.set(t,t,0):s.set(t,t,1/this.s[t]);let o=this.U,i=this.rightSingularVectors,n=i.mmul(s),h=i.rows,u=o.rows,l=v.zeros(h,u);for(let t=0;t<h;t++)for(let e=0;e<u;e++){let s=0;for(let i=0;i<r;i++)s+=n.get(t,i)*o.get(e,i);l.set(t,e,s)}return l.mmul(t)}solveForDiagonal(t){return this.solve(v.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,s=t.columns,o=new v(r,this.s.length);for(let i=0;i<r;i++)for(let r=0;r<s;r++)Math.abs(this.s[r])>e&&o.set(i,r,t.get(i,r)/this.s[r]);let i=this.U,n=i.rows,h=i.columns,u=new v(r,n);for(let t=0;t<r;t++)for(let e=0;e<n;e++){let r=0;for(let s=0;s<h;s++)r+=o.get(t,s)*i.get(e,s);u.set(t,e,r)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let s=0,o=r.length;s<o;s++)r[s]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return v.diag(this.s)}}function j(t,e,r=!1){return(t=P.checkMatrix(t),e=P.checkMatrix(e),r)?new L(t).solve(e):t.isSquare()?new F(t).solve(e):new _(t).solve(e)}class ${constructor(t,e={}){let r,s;let{assumeSymmetric:o=!1}=e;if(!(t=P.checkMatrix(t)).isSquare())throw Error("Matrix is not a square matrix");if(t.isEmpty())throw Error("Matrix must be non-empty");let i=t.columns,n=new v(i,i),h=new Float64Array(i),u=new Float64Array(i),l=t;if(o||t.isSymmetric()){for(r=0;r<i;r++)for(s=0;s<i;s++)n.set(r,s,l.get(r,s));(function(t,e,r,s){let o,i,n,h,u,l,a,f;for(u=0;u<t;u++)r[u]=s.get(t-1,u);for(h=t-1;h>0;h--){for(l=0,f=0,n=0;l<h;l++)f+=Math.abs(r[l]);if(0===f)for(u=0,e[h]=r[h-1];u<h;u++)r[u]=s.get(h-1,u),s.set(h,u,0),s.set(u,h,0);else{for(l=0;l<h;l++)r[l]/=f,n+=r[l]*r[l];for(o=r[h-1],i=Math.sqrt(n),o>0&&(i=-i),e[h]=f*i,n-=o*i,r[h-1]=o-i,u=0;u<h;u++)e[u]=0;for(u=0;u<h;u++){for(o=r[u],s.set(u,h,o),i=e[u]+s.get(u,u)*o,l=u+1;l<=h-1;l++)i+=s.get(l,u)*r[l],e[l]+=s.get(l,u)*o;e[u]=i}for(u=0,o=0;u<h;u++)e[u]/=n,o+=e[u]*r[u];for(u=0,a=o/(n+n);u<h;u++)e[u]-=a*r[u];for(u=0;u<h;u++){for(o=r[u],i=e[u],l=u;l<=h-1;l++)s.set(l,u,s.get(l,u)-(o*e[l]+i*r[l]));r[u]=s.get(h-1,u),s.set(h,u,0)}}r[h]=n}for(h=0;h<t-1;h++){if(s.set(t-1,h,s.get(h,h)),s.set(h,h,1),0!==(n=r[h+1])){for(l=0;l<=h;l++)r[l]=s.get(l,h+1)/n;for(u=0;u<=h;u++){for(l=0,i=0;l<=h;l++)i+=s.get(l,h+1)*s.get(l,u);for(l=0;l<=h;l++)s.set(l,u,s.get(l,u)-i*r[l])}}for(l=0;l<=h;l++)s.set(l,h+1,0)}for(u=0;u<t;u++)r[u]=s.get(t-1,u),s.set(t-1,u,0);s.set(t-1,t-1,1),e[0]=0})(i,u,h,n),function(t,e,r,s){let o,i,n,h,u,l,a,f,c,m,g,w,p,d,y,b;for(n=1;n<t;n++)e[n-1]=e[n];e[t-1]=0;let M=0,v=0,x=Number.EPSILON;for(l=0;l<t;l++){for(v=Math.max(v,Math.abs(r[l])+Math.abs(e[l])),a=l;a<t&&!(Math.abs(e[a])<=x*v);)a++;if(a>l)do{for(o=r[l],c=z(f=(r[l+1]-o)/(2*e[l]),1),f<0&&(c=-c),r[l]=e[l]/(f+c),r[l+1]=e[l]*(f+c),m=r[l+1],i=o-r[l],n=l+2;n<t;n++)r[n]-=i;for(M+=i,f=r[a],w=g=1,p=g,d=e[l+1],y=0,b=0,n=a-1;n>=l;n--)for(u=0,p=w,w=g,b=y,o=g*e[n],i=g*f,c=z(f,e[n]),e[n+1]=y*c,y=e[n]/c,f=(g=f/c)*r[n]-y*o,r[n+1]=i+y*(g*o+y*r[n]);u<t;u++)i=s.get(u,n+1),s.set(u,n+1,y*s.get(u,n)+g*i),s.set(u,n,g*s.get(u,n)-y*i);f=-y*b*p*d*e[l]/m,e[l]=y*f,r[l]=g*f}while(Math.abs(e[l])>x*v);r[l]=r[l]+M,e[l]=0}for(n=0;n<t-1;n++){for(u=n,f=r[n],h=n+1;h<t;h++)r[h]<f&&(u=h,f=r[h]);if(u!==n)for(h=0,r[u]=r[n],r[n]=f;h<t;h++)f=s.get(h,n),s.set(h,n,s.get(h,u)),s.set(h,u,f)}}(i,u,h,n)}else{let t=new v(i,i),e=new Float64Array(i);for(s=0;s<i;s++)for(r=0;r<i;r++)t.set(r,s,l.get(r,s));(function(t,e,r,s){let o,i,n,h,u,l,a;let f=t-1;for(l=1;l<=f-1;l++){for(a=0,h=l;h<=f;h++)a+=Math.abs(e.get(h,l-1));if(0!==a){for(n=0,h=f;h>=l;h--)r[h]=e.get(h,l-1)/a,n+=r[h]*r[h];for(i=Math.sqrt(n),r[l]>0&&(i=-i),n-=r[l]*i,r[l]=r[l]-i,u=l;u<t;u++){for(o=0,h=f;h>=l;h--)o+=r[h]*e.get(h,u);for(o/=n,h=l;h<=f;h++)e.set(h,u,e.get(h,u)-o*r[h])}for(h=0;h<=f;h++){for(o=0,u=f;u>=l;u--)o+=r[u]*e.get(h,u);for(o/=n,u=l;u<=f;u++)e.set(h,u,e.get(h,u)-o*r[u])}r[l]=a*r[l],e.set(l,l-1,a*i)}}for(h=0;h<t;h++)for(u=0;u<t;u++)s.set(h,u,h===u?1:0);for(l=f-1;l>=1;l--)if(0!==e.get(l,l-1)){for(h=l+1;h<=f;h++)r[h]=e.get(h,l-1);for(u=l;u<=f;u++){for(i=0,h=l;h<=f;h++)i+=r[h]*s.get(h,u);for(i=i/r[l]/e.get(l,l-1),h=l;h<=f;h++)s.set(h,u,s.get(h,u)+i*r[h])}}})(i,t,e,n),function(t,e,r,s,o){let i,n,h,u,l,a,f,c,m,g,w,p,d,y,b,M=t-1,v=t-1,x=Number.EPSILON,E=0,S=0,I=0,T=0,R=0,A=0,k=0,N=0;for(i=0;i<t;i++)for((i<0||i>v)&&(r[i]=o.get(i,i),e[i]=0),n=Math.max(i-1,0);n<t;n++)S+=Math.abs(o.get(i,n));for(;M>=0;){for(u=M;u>0&&(0===(A=Math.abs(o.get(u-1,u-1))+Math.abs(o.get(u,u)))&&(A=S),!(Math.abs(o.get(u,u-1))<x*A));)u--;if(u===M)o.set(M,M,o.get(M,M)+E),r[M]=o.get(M,M),e[M]=0,M--,N=0;else if(u===M-1){if(f=o.get(M,M-1)*o.get(M-1,M),k=Math.sqrt(Math.abs(T=(I=(o.get(M-1,M-1)-o.get(M,M))/2)*I+f)),o.set(M,M,o.get(M,M)+E),o.set(M-1,M-1,o.get(M-1,M-1)+E),c=o.get(M,M),T>=0){for(k=I>=0?I+k:I-k,r[M-1]=c+k,r[M]=r[M-1],0!==k&&(r[M]=c-f/k),e[M-1]=0,e[M]=0,A=Math.abs(c=o.get(M,M-1))+Math.abs(k),R=Math.sqrt((I=c/A)*I+(T=k/A)*T),I/=R,T/=R,n=M-1;n<t;n++)k=o.get(M-1,n),o.set(M-1,n,T*k+I*o.get(M,n)),o.set(M,n,T*o.get(M,n)-I*k);for(i=0;i<=M;i++)k=o.get(i,M-1),o.set(i,M-1,T*k+I*o.get(i,M)),o.set(i,M,T*o.get(i,M)-I*k);for(i=0;i<=v;i++)k=s.get(i,M-1),s.set(i,M-1,T*k+I*s.get(i,M)),s.set(i,M,T*s.get(i,M)-I*k)}else r[M-1]=c+I,r[M]=c+I,e[M-1]=k,e[M]=-k;M-=2,N=0}else{if(c=o.get(M,M),m=0,f=0,u<M&&(m=o.get(M-1,M-1),f=o.get(M,M-1)*o.get(M-1,M)),10===N){for(E+=c,i=0;i<=M;i++)o.set(i,i,o.get(i,i)-c);c=m=.75*(A=Math.abs(o.get(M,M-1))+Math.abs(o.get(M-1,M-2))),f=-.4375*A*A}if(30===N&&(A=(A=(m-c)/2)*A+f)>0){for(A=Math.sqrt(A),m<c&&(A=-A),A=c-f/((m-c)/2+A),i=0;i<=M;i++)o.set(i,i,o.get(i,i)-A);E+=A,c=m=f=.964}for(N+=1,l=M-2;l>=u&&(A=Math.abs(I=((R=c-(k=o.get(l,l)))*(A=m-k)-f)/o.get(l+1,l)+o.get(l,l+1))+Math.abs(T=o.get(l+1,l+1)-k-R-A)+Math.abs(R=o.get(l+2,l+1)),I/=A,T/=A,R/=A,!(l===u||Math.abs(o.get(l,l-1))*(Math.abs(T)+Math.abs(R))<Math.abs(I)*(Math.abs(o.get(l-1,l-1))+Math.abs(k)+Math.abs(o.get(l+1,l+1)))*x));)l--;for(i=l+2;i<=M;i++)o.set(i,i-2,0),i>l+2&&o.set(i,i-3,0);for(h=l;h<=M-1&&(y=h!==M-1,h!==l&&0!==(c=Math.abs(I=o.get(h,h-1))+Math.abs(T=o.get(h+1,h-1))+Math.abs(R=y?o.get(h+2,h-1):0))&&(I/=c,T/=c,R/=c),0!==c);h++)if(A=Math.sqrt(I*I+T*T+R*R),I<0&&(A=-A),0!==A){for(h!==l?o.set(h,h-1,-A*c):u!==l&&o.set(h,h-1,-o.get(h,h-1)),I+=A,c=I/A,m=T/A,k=R/A,T/=I,R/=I,n=h;n<t;n++)I=o.get(h,n)+T*o.get(h+1,n),y&&(I+=R*o.get(h+2,n),o.set(h+2,n,o.get(h+2,n)-I*k)),o.set(h,n,o.get(h,n)-I*c),o.set(h+1,n,o.get(h+1,n)-I*m);for(i=0;i<=Math.min(M,h+3);i++)I=c*o.get(i,h)+m*o.get(i,h+1),y&&(I+=k*o.get(i,h+2),o.set(i,h+2,o.get(i,h+2)-I*R)),o.set(i,h,o.get(i,h)-I),o.set(i,h+1,o.get(i,h+1)-I*T);for(i=0;i<=v;i++)I=c*s.get(i,h)+m*s.get(i,h+1),y&&(I+=k*s.get(i,h+2),s.set(i,h+2,s.get(i,h+2)-I*R)),s.set(i,h,s.get(i,h)-I),s.set(i,h+1,s.get(i,h+1)-I*T)}}}if(0!==S){for(M=t-1;M>=0;M--)if(I=r[M],0===(T=e[M]))for(u=M,o.set(M,M,1),i=M-1;i>=0;i--){for(f=o.get(i,i)-I,R=0,n=u;n<=M;n++)R+=o.get(i,n)*o.get(n,M);if(e[i]<0)k=f,A=R;else if(u=i,0===e[i]?o.set(i,M,0!==f?-R/f:-R/(x*S)):(c=o.get(i,i+1),m=o.get(i+1,i),a=(c*A-k*R)/(T=(r[i]-I)*(r[i]-I)+e[i]*e[i]),o.set(i,M,a),o.set(i+1,M,Math.abs(c)>Math.abs(k)?(-R-f*a)/c:(-A-m*a)/k)),x*(a=Math.abs(o.get(i,M)))*a>1)for(n=i;n<=M;n++)o.set(n,M,o.get(n,M)/a)}else if(T<0)for(u=M-1,Math.abs(o.get(M,M-1))>Math.abs(o.get(M-1,M))?(o.set(M-1,M-1,T/o.get(M,M-1)),o.set(M-1,M,-(o.get(M,M)-I)/o.get(M,M-1))):(b=O(0,-o.get(M-1,M),o.get(M-1,M-1)-I,T),o.set(M-1,M-1,b[0]),o.set(M-1,M,b[1])),o.set(M,M-1,0),o.set(M,M,1),i=M-2;i>=0;i--){for(g=0,w=0,n=u;n<=M;n++)g+=o.get(i,n)*o.get(n,M-1),w+=o.get(i,n)*o.get(n,M);if(f=o.get(i,i)-I,e[i]<0)k=f,R=g,A=w;else if(u=i,0===e[i]?(b=O(-g,-w,f,T),o.set(i,M-1,b[0]),o.set(i,M,b[1])):(c=o.get(i,i+1),m=o.get(i+1,i),p=(r[i]-I)*(r[i]-I)+e[i]*e[i]-T*T,d=(r[i]-I)*2*T,0===p&&0===d&&(p=x*S*(Math.abs(f)+Math.abs(T)+Math.abs(c)+Math.abs(m)+Math.abs(k))),b=O(c*R-k*g+T*w,c*A-k*w-T*g,p,d),o.set(i,M-1,b[0]),o.set(i,M,b[1]),Math.abs(c)>Math.abs(k)+Math.abs(T)?(o.set(i+1,M-1,(-g-f*o.get(i,M-1)+T*o.get(i,M))/c),o.set(i+1,M,(-w-f*o.get(i,M)-T*o.get(i,M-1))/c)):(b=O(-R-m*o.get(i,M-1),-A-m*o.get(i,M),k,T),o.set(i+1,M-1,b[0]),o.set(i+1,M,b[1]))),x*(a=Math.max(Math.abs(o.get(i,M-1)),Math.abs(o.get(i,M))))*a>1)for(n=i;n<=M;n++)o.set(n,M-1,o.get(n,M-1)/a),o.set(n,M,o.get(n,M)/a)}for(i=0;i<t;i++)if(i<0||i>v)for(n=i;n<t;n++)s.set(i,n,o.get(i,n));for(n=t-1;n>=0;n--)for(i=0;i<=v;i++){for(h=0,k=0;h<=Math.min(n,v);h++)k+=s.get(i,h)*o.get(h,n);s.set(i,n,k)}}}(i,u,h,n,t)}this.n=i,this.e=u,this.d=h,this.V=n}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,r=this.n,s=this.e,o=this.d,i=new v(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)i.set(t,e,0);i.set(t,t,o[t]),s[t]>0?i.set(t,t+1,s[t]):s[t]<0&&i.set(t,t-1,s[t])}return i}}function O(t,e,r,s){let o,i;return Math.abs(r)>Math.abs(s)?(o=s/r,i=r+o*s,[(t+o*e)/i,(e-o*t)/i]):(o=r/s,i=s+o*r,[(o*t+e)/i,(o*e-t)/i])}class B{constructor(t){let e,r,s;if(!(t=P.checkMatrix(t)).isSymmetric())throw Error("Matrix is not symmetric");let o=t,i=o.rows,n=new v(i,i),h=!0;for(r=0;r<i;r++){let t=0;for(s=0;s<r;s++){let i=0;for(e=0;e<s;e++)i+=n.get(s,e)*n.get(r,e);i=(o.get(r,s)-i)/n.get(s,s),n.set(r,s,i),t+=i*i}for(h&=(t=o.get(r,r)-t)>0,n.set(r,r,Math.sqrt(Math.max(t,0))),s=r+1;s<i;s++)n.set(r,s,0)}this.L=n,this.positiveDefinite=!!h}isPositiveDefinite(){return this.positiveDefinite}solve(t){let e,r,s;t=P.checkMatrix(t);let o=this.L,i=o.rows;if(t.rows!==i)throw Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw Error("Matrix is not positive definite");let n=t.columns,h=t.clone();for(s=0;s<i;s++)for(r=0;r<n;r++){for(e=0;e<s;e++)h.set(s,r,h.get(s,r)-h.get(e,r)*o.get(s,e));h.set(s,r,h.get(s,r)/o.get(s,s))}for(s=i-1;s>=0;s--)for(r=0;r<n;r++){for(e=s+1;e<i;e++)h.set(s,r,h.get(s,r)-h.get(e,r)*o.get(e,s));h.set(s,r,h.get(s,r)/o.get(s,s))}return h}get lowerTriangularMatrix(){return this.L}}class W{constructor(t,e={}){let r,o,i,n,h;t=P.checkMatrix(t);let{Y:u}=e,{scaleScores:l=!1,maxIterations:a=1e3,terminationCriteria:f=1e-10}=e;if(u){if((u=s.isAnyArray(u)&&"number"==typeof u[0]?v.columnVector(u):P.checkMatrix(u)).rows!==t.rows)throw Error("Y should have the same number of rows as X");r=u.getColumnVector(0)}else r=t.getColumnVector(0);let c=1;for(let e=0;e<a&&c>f;e++)n=(n=t.transpose().mmul(r).div(r.transpose().mmul(r).get(0,0))).div(n.norm()),o=t.mmul(n).div(n.transpose().mmul(n).get(0,0)),e>0&&(c=o.clone().sub(h).pow(2).sum()),h=o.clone(),u?(i=(i=u.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0))).div(i.norm()),r=u.mmul(i).div(i.transpose().mmul(i).get(0,0))):r=o;if(u){let e=t.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0));e=e.div(e.norm());let s=t.clone().sub(o.clone().mmul(e.transpose())),h=r.transpose().mmul(o).div(o.transpose().mmul(o).get(0,0)),l=u.clone().sub(o.clone().mulS(h.get(0,0)).mmul(i.transpose()));this.t=o,this.p=e.transpose(),this.w=n.transpose(),this.q=i,this.u=r,this.s=o.transpose().mmul(o),this.xResidual=s,this.yResidual=l,this.betas=h}else this.w=n.transpose(),this.s=o.transpose().mmul(o).sqrt(),l?this.t=o.clone().div(this.s.get(0,0)):this.t=o,this.xResidual=t.sub(o.mmul(n.transpose()))}}e.XA=b,e.a_=B,e.yQ=B,e.Hs=E,e.Ec=$,e.dx=$,e.LU=F,e.Rm=F,e.y3=v,e.qK=T,e.pb=I,e.j=R,e.sO=A,e.BZ=N,e.EK=k,e.Db=C,e.Fx=q,e.tU=V,e.Ym=W,e.rs=W,e.QR=_,e.TB=_,e.oH=L,e.Sc=L,e.BN=x,e.it=D,e.$r=P,e.QM=function(t,e=t,r={}){t=new v(t);let o=!1;if("object"!=typeof e||v.isMatrix(e)||s.isAnyArray(e)?e=new v(e):(r=e,e=t,o=!0),t.rows!==e.rows)throw TypeError("Both matrices must have the same number of rows");let{center:i=!0,scale:n=!0}=r;i&&(t.center("column"),o||e.center("column")),n&&(t.scale("column"),o||e.scale("column"));let h=t.standardDeviation("column",{unbiased:!0}),u=o?h:e.standardDeviation("column",{unbiased:!0}),l=t.transpose().mmul(e);for(let e=0;e<l.rows;e++)for(let r=0;r<l.columns;r++)l.set(e,r,l.get(e,r)*(1/(h[e]*u[r]))*(1/(t.rows-1)));return l},e.AV=function(t,e=t,r={}){t=new v(t);let o=!1;if("object"!=typeof e||v.isMatrix(e)||s.isAnyArray(e)?e=new v(e):(r=e,e=t,o=!0),t.rows!==e.rows)throw TypeError("Both matrices must have the same number of rows");let{center:i=!0}=r;i&&(t=t.center("column"),o||(e=e.center("column")));let n=t.transpose().mmul(e);for(let e=0;e<n.rows;e++)for(let r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)*(1/(t.rows-1)));return n},e.GH=function t(e){if((e=v.checkMatrix(e)).isSquare()){let r,s,o;if(0===e.columns)return 1;if(2===e.columns)return r=e.get(0,0),s=e.get(0,1),o=e.get(1,0),r*e.get(1,1)-s*o;if(3!==e.columns)return new F(e).determinant;{let i,n,h;return i=new C(e,[1,2],[1,2]),n=new C(e,[1,2],[0,2]),h=new C(e,[1,2],[0,1]),r=e.get(0,0),s=e.get(0,1),o=e.get(0,2),r*t(i)-s*t(n)+o*t(h)}}throw Error("determinant can only be calculated for a square matrix")},e.SO=function(t,e=!1){return(t=P.checkMatrix(t),e)?new L(t).inverse():j(t,v.eye(t.rows))},e.uZ=function(t,e={}){let{thresholdValue:r=1e-9,thresholdError:s=1e-9}=e,o=(t=v.checkMatrix(t)).rows,i=new v(o,o);for(let e=0;e<o;e++){let n=v.columnVector(t.getRow(e)),h=t.subMatrixRow(function(t,e){let r=[];for(let s=0;s<t;s++)s!==e&&r.push(s);return r}(o,e)).transpose(),u=new L(h).solve(n),l=v.sub(n,h.mmul(u)).abs().max();i.setRow(e,function(t,e,r,s=1e-9,o=1e-9){if(t>o)return Array(e.rows+1).fill(0);{let t=e.addRow(r,[0]);for(let e=0;e<t.rows;e++)Math.abs(t.get(e,0))<s&&t.set(e,0,0);return t.to1DArray()}}(l,u,e,r,s))}return i},e.yU=function(t,e=Number.EPSILON){if((t=v.checkMatrix(t)).isEmpty())return t.transpose();let r=new L(t,{autoTranspose:!0}),s=r.leftSingularVectors,o=r.rightSingularVectors,i=r.diagonal;for(let t=0;t<i.length;t++)Math.abs(i[t])>e?i[t]=1/i[t]:i[t]=0;return o.mmul(v.diag(i).mmul(s.transpose()))},e.F1=j,e.re=function(t,e){if(s.isAnyArray(t))return t[0]&&s.isAnyArray(t[0])?new P(t):new D(t,e);throw Error("the argument is not an array")}},87926:function(t){var e=Object.prototype.hasOwnProperty,r="~";function s(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,s,i,n){if("function"!=typeof s)throw TypeError("The listener must be a function");var h=new o(s,i||t,n),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],h]:t._events[u].push(h):(t._events[u]=h,t._eventsCount++),t}function n(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function h(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1)),h.prototype.eventNames=function(){var t,s,o=[];if(0===this._eventsCount)return o;for(s in t=this._events)e.call(t,s)&&o.push(r?s.slice(1):s);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},h.prototype.listeners=function(t){var e=r?r+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var o=0,i=s.length,n=Array(i);o<i;o++)n[o]=s[o].fn;return n},h.prototype.listenerCount=function(t){var e=r?r+t:t,s=this._events[e];return s?s.fn?1:s.length:0},h.prototype.emit=function(t,e,s,o,i,n){var h=r?r+t:t;if(!this._events[h])return!1;var u,l,a=this._events[h],f=arguments.length;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),f){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,e),!0;case 3:return a.fn.call(a.context,e,s),!0;case 4:return a.fn.call(a.context,e,s,o),!0;case 5:return a.fn.call(a.context,e,s,o,i),!0;case 6:return a.fn.call(a.context,e,s,o,i,n),!0}for(l=1,u=Array(f-1);l<f;l++)u[l-1]=arguments[l];a.fn.apply(a.context,u)}else{var c,m=a.length;for(l=0;l<m;l++)switch(a[l].once&&this.removeListener(t,a[l].fn,void 0,!0),f){case 1:a[l].fn.call(a[l].context);break;case 2:a[l].fn.call(a[l].context,e);break;case 3:a[l].fn.call(a[l].context,e,s);break;case 4:a[l].fn.call(a[l].context,e,s,o);break;default:if(!u)for(c=1,u=Array(f-1);c<f;c++)u[c-1]=arguments[c];a[l].fn.apply(a[l].context,u)}}return!0},h.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},h.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},h.prototype.removeListener=function(t,e,s,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return n(this,i),this;var h=this._events[i];if(h.fn)h.fn!==e||o&&!h.once||s&&h.context!==s||n(this,i);else{for(var u=0,l=[],a=h.length;u<a;u++)(h[u].fn!==e||o&&!h[u].once||s&&h[u].context!==s)&&l.push(h[u]);l.length?this._events[i]=1===l.length?l[0]:l:n(this,i)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&n(this,e)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,t.exports=h},23975:function(t,e,r){r.d(e,{p:function(){return o}});var s=r(30862);function o(t,e,r=!1){let o=t.rows;t.columns;let{svd:i,mirrorIdentityForSolution:n}=function(t,e){let r=t.rows,o=new s.oH(t),i=Array(o.diagonal.length).fill(1),n=Array(o.diagonal.length).fill(1);if(!e){if(0>s.GH(t)){let t=i.length-1;i[t]=-1}if(n=i,o.rank===r-1&&(n=Array(o.diagonal.length).fill(1),s.GH(o.U)*s.GH(o.V)<0)){let t=n.length-1;n[t]=-1}}return{svd:o,mirrorIdentityForErrorBound:i,mirrorIdentityForSolution:n}}(function(t,e){let r=t.rows,o=t.columns,i=s.y3.columnVector(t.mean("row")),n=s.y3.columnVector(e.mean("row")),h=s.y3.zeros(r,r);for(let r=0;r<o;r++){let u=t.getColumnVector(r),l=e.getColumnVector(r),a=s.y3.sub(l,n).mmul(s.y3.sub(u,i).transpose());h.addM(s.y3.div(a,o))}return h}(t,e),r),h=i.U.mmul(s.y3.diag(n)).mmul(i.V.transpose()),u=t.variance("row",{unbiased:!1}).reduce((t,e)=>t+e),l=0;for(let t=0;t<o;t++){let e=n[t];l+=i.diagonal[t]*e}let a=l/u,f=s.y3.columnVector(t.mean("row")),c=s.y3.columnVector(e.mean("row")),m=s.y3.sub(c,s.y3.mul(h.mmul(f),a));return{rotation:h,scale:a,translation:m,fromMean:f,toMean:c}}},64243:function(t,e,r){r.d(e,{h:function(){return s}});function s(t,e){return Array.isArray(e)?[t.a*e[0]+t.c*e[1]+t.e,t.b*e[0]+t.d*e[1]+t.f]:{x:t.a*e.x+t.c*e.y+t.e,y:t.b*e.x+t.d*e.y+t.f}}},88619:function(t,e,r){r.d(e,{Iu:function(){return n.I},bA:function(){return o.b},hC:function(){return s.h},qC:function(){return i.q}});var s=r(64243),o=r(45180),i=r(86613),n=r(37431);r(9174)},45180:function(t,e,r){function s(t){return void 0===t}r.d(e,{b:function(){return n}});var o=r(37431),i=r(86613);function n(t,e,r,n){s(e)&&(e=t);let h={a:t,c:0,e:0,b:0,d:e,f:0};return s(r)||s(n)?h:(0,i.v)([(0,o.I)(r,n),h,(0,o.I)(-r,-n)])}},86613:function(t,e,r){function s(...t){t=Array.isArray(t[0])?t[0]:t;let e=(t,e)=>({a:t.a*e.a+t.c*e.b,c:t.a*e.c+t.c*e.d,e:t.a*e.e+t.c*e.f+t.e,b:t.b*e.a+t.d*e.b,d:t.b*e.c+t.d*e.d,f:t.b*e.e+t.d*e.f+t.f});switch(t.length){case 0:throw Error("no matrices provided");case 1:return t[0];case 2:return e(t[0],t[1]);default:{let[r,o,...i]=t;return s(e(r,o),...i)}}}function o(...t){return s(...t)}r.d(e,{q:function(){return o},v:function(){return s}})},37431:function(t,e,r){r.d(e,{I:function(){return s}});function s(t,e=0){return{a:1,c:0,e:t,b:0,d:1,f:e}}},80613:function(t,e,r){r.d(e,{WE:function(){return w}});let{Axios:s,AxiosError:o,CanceledError:i,isCancel:n,CancelToken:h,VERSION:u,all:l,Cancel:a,isAxiosError:f,spread:c,toFormData:m,AxiosHeaders:g,HttpStatusCode:w,formToJSON:p,getAdapter:d,mergeConfig:y}=r(90162).default},18762:function(t,e,r){var s,o;let i,n;r.d(e,{Lj:function(){return w},X3:function(){return g}});let h=(t,e)=>e.some(e=>t instanceof e),u=new WeakMap,l=new WeakMap,a=new WeakMap,f={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return u.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return c(t[e])},set:(t,e,r)=>(t[e]=r,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function c(t){var e;if(t instanceof IDBRequest)return function(t){let e=new Promise((e,r)=>{let s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(c(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return a.set(e,t),e}(t);if(l.has(t))return l.get(t);let r="function"==typeof(e=t)?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),c(this.request)}:function(...t){return c(e.apply(m(this),t))}:(e instanceof IDBTransaction&&function(t){if(u.has(t))return;let e=new Promise((e,r)=>{let s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});u.set(t,e)}(e),h(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,f):e;return r!==t&&(l.set(t,r),a.set(r,t)),r}let m=t=>a.get(t);function g(t,e,{blocked:r,upgrade:s,blocking:o,terminated:i}={}){let n=indexedDB.open(t,e),h=c(n);return s&&n.addEventListener("upgradeneeded",t=>{s(c(n.result),t.oldVersion,t.newVersion,c(n.transaction),t)}),r&&n.addEventListener("blocked",t=>r(t.oldVersion,t.newVersion,t)),h.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),h}function w(t,{blocked:e}={}){let r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",t=>e(t.oldVersion,t)),c(r).then(()=>void 0)}let p=["get","getKey","getAll","getAllKeys","count"],d=["put","add","delete","clear"],y=new Map;function b(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e))return;if(y.get(e))return y.get(e);let r=e.replace(/FromIndex$/,""),s=e!==r,o=d.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(o||p.includes(r)))return;let i=async function(t,...e){let i=this.transaction(t,o?"readwrite":"readonly"),n=i.store;return s&&(n=n.index(e.shift())),(await Promise.all([n[r](...e),o&&i.done]))[0]};return y.set(e,i),i}f={...s=f,get:(t,e,r)=>b(t,e)||s.get(t,e,r),has:(t,e)=>!!b(t,e)||s.has(t,e)};let M=["continue","continuePrimaryKey","advance"],v={},x=new WeakMap,E=new WeakMap,S={get(t,e){if(!M.includes(e))return t[e];let r=v[e];return r||(r=v[e]=function(...t){x.set(this,E.get(this)[e](...t))}),r}};async function*I(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;let r=new Proxy(e,S);for(E.set(r,e),a.set(r,m(e));e;)yield r,e=await (x.get(r)||e.continue()),x.delete(r)}function T(t,e){return e===Symbol.asyncIterator&&h(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&h(t,[IDBIndex,IDBObjectStore])}f={...o=f,get:(t,e,r)=>T(t,e)?I:o.get(t,e,r),has:(t,e)=>T(t,e)||o.has(t,e)}},30862:function(t,e,r){r.d(e,{GH:function(){return n},SO:function(){return h},oH:function(){return i},y3:function(){return o}});var s=r(31546);s.XA,s.a_,s.yQ,s.Hs,s.Ec,s.dx,s.LU,s.Rm;let o=s.y3;s.qK,s.pb,s.j,s.sO,s.BZ,s.EK,s.Db,s.Fx,s.tU,s.Ym,s.rs,s.QR,s.TB;let i=s.oH;s.Sc,s.BN,s.it,s.$r,s.QM,s.AV,s.y3,s.y3;let n=s.GH,h=s.SO;s.uZ,s.yU,s.F1,s.re},66134:function(t,e,r){r.d(e,{Z:function(){return $}});var s,o,i,n,h,u,l,a,f,c,m,g,w,p,d,y,b,M,v,x,E,S,I,T,R,A,k,N=r(87926);class C extends Error{constructor(t){super(t),this.name="TimeoutError"}}class q extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}let V=t=>void 0===globalThis.DOMException?new q(t):new DOMException(t),D=t=>{let e=void 0===t.reason?V("This operation was aborted."):t.reason;return e instanceof Error?e:V(e)};var P=function(t,e,r,s){if("a"===r&&!s)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(t):s?s.value:e.get(t)};class F{constructor(){s.set(this,[])}enqueue(t,e){let r={priority:(e={priority:0,...e}).priority,run:t};if(this.size&&P(this,s,"f")[this.size-1].priority>=e.priority){P(this,s,"f").push(r);return}let o=function(t,e,r){let s=0,o=t.length;for(;o>0;){let i=Math.trunc(o/2),n=s+i;0>=r(t[n],e)?(s=++n,o-=i+1):o=i}return s}(P(this,s,"f"),r,(t,e)=>e.priority-t.priority);P(this,s,"f").splice(o,0,r)}dequeue(){let t=P(this,s,"f").shift();return null==t?void 0:t.run}filter(t){return P(this,s,"f").filter(e=>e.priority===t.priority).map(t=>t.run)}get size(){return P(this,s,"f").length}}s=new WeakMap;var z=function(t,e,r,s,o){if("m"===s)throw TypeError("Private method is not writable");if("a"===s&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(t,r):o?o.value=r:e.set(t,r),r},_=function(t,e,r,s){if("a"===r&&!s)throw TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(t):s?s.value:e.get(t)};class L extends Error{}class j extends N{constructor(t){var e,r,s,b;if(super(),o.add(this),i.set(this,void 0),n.set(this,void 0),h.set(this,0),u.set(this,void 0),l.set(this,void 0),a.set(this,0),f.set(this,void 0),c.set(this,void 0),m.set(this,void 0),g.set(this,void 0),w.set(this,0),p.set(this,void 0),d.set(this,void 0),y.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:F,...t}).intervalCap&&t.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==r?r:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(b=null===(s=t.interval)||void 0===s?void 0:s.toString())&&void 0!==b?b:""}\` (${typeof t.interval})`);z(this,i,t.carryoverConcurrencyCount,"f"),z(this,n,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),z(this,u,t.intervalCap,"f"),z(this,l,t.interval,"f"),z(this,m,new t.queueClass,"f"),z(this,g,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,z(this,y,!0===t.throwOnTimeout,"f"),z(this,d,!1===t.autoStart,"f")}get concurrency(){return _(this,p,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);z(this,p,t,"f"),_(this,o,"m",R).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:_(this,y,"f"),...e},new Promise((r,s)=>{_(this,m,"f").enqueue(async()=>{var i,n,u;z(this,w,(n=_(this,w,"f"),++n),"f"),z(this,h,(u=_(this,h,"f"),++u),"f");try{if(null===(i=e.signal)||void 0===i?void 0:i.aborted)throw new L("The task was aborted.");let s=t({signal:e.signal});e.timeout&&(s=function(t,e,r,s){let o;let i=new Promise((i,n)=>{if("number"!=typeof e||1!==Math.sign(e))throw TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){i(t);return}if((s={customTimers:{setTimeout,clearTimeout},...s}).signal){let{signal:t}=s;t.aborted&&n(D(t)),t.addEventListener("abort",()=>{n(D(t))})}o=s.customTimers.setTimeout.call(void 0,()=>{if("function"==typeof r){try{i(r())}catch(t){n(t)}return}let s="string"==typeof r?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new C(s);"function"==typeof t.cancel&&t.cancel(),n(o)},e),(async()=>{try{i(await t)}catch(t){n(t)}finally{s.customTimers.clearTimeout.call(void 0,o)}})()});return i.clear=()=>{clearTimeout(o),o=void 0},i}(Promise.resolve(s),e.timeout)),e.signal&&(s=Promise.race([s,_(this,o,"m",A).call(this,e.signal)]));let n=await s;r(n),this.emit("completed",n)}catch(t){if(t instanceof C&&!e.throwOnTimeout){r();return}s(t),this.emit("error",t)}finally{_(this,o,"m",v).call(this)}},e),this.emit("add"),_(this,o,"m",S).call(this)})}async addAll(t,e){return Promise.all(t.map(async t=>this.add(t,e)))}start(){return _(this,d,"f")&&(z(this,d,!1,"f"),_(this,o,"m",R).call(this)),this}pause(){z(this,d,!0,"f")}clear(){z(this,m,new(_(this,g,"f")),"f")}async onEmpty(){0!==_(this,m,"f").size&&await _(this,o,"m",k).call(this,"empty")}async onSizeLessThan(t){_(this,m,"f").size<t||await _(this,o,"m",k).call(this,"next",()=>_(this,m,"f").size<t)}async onIdle(){(0!==_(this,w,"f")||0!==_(this,m,"f").size)&&await _(this,o,"m",k).call(this,"idle")}get size(){return _(this,m,"f").size}sizeBy(t){return _(this,m,"f").filter(t).length}get pending(){return _(this,w,"f")}get isPaused(){return _(this,d,"f")}}i=new WeakMap,n=new WeakMap,h=new WeakMap,u=new WeakMap,l=new WeakMap,a=new WeakMap,f=new WeakMap,c=new WeakMap,m=new WeakMap,g=new WeakMap,w=new WeakMap,p=new WeakMap,d=new WeakMap,y=new WeakMap,o=new WeakSet,b=function(){return _(this,n,"f")||_(this,h,"f")<_(this,u,"f")},M=function(){return _(this,w,"f")<_(this,p,"f")},v=function(){var t;z(this,w,(t=_(this,w,"f"),--t),"f"),_(this,o,"m",S).call(this),this.emit("next")},x=function(){_(this,o,"m",T).call(this),_(this,o,"m",I).call(this),z(this,c,void 0,"f")},E=function(){let t=Date.now();if(void 0===_(this,f,"f")){let e=_(this,a,"f")-t;if(!(e<0))return void 0===_(this,c,"f")&&z(this,c,setTimeout(()=>{_(this,o,"m",x).call(this)},e),"f"),!0;z(this,h,_(this,i,"f")?_(this,w,"f"):0,"f")}return!1},S=function(){if(0===_(this,m,"f").size)return _(this,f,"f")&&clearInterval(_(this,f,"f")),z(this,f,void 0,"f"),this.emit("empty"),0===_(this,w,"f")&&this.emit("idle"),!1;if(!_(this,d,"f")){let t=!_(this,o,"a",E);if(_(this,o,"a",b)&&_(this,o,"a",M)){let e=_(this,m,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&_(this,o,"m",I).call(this),!0)}}return!1},I=function(){_(this,n,"f")||void 0!==_(this,f,"f")||(z(this,f,setInterval(()=>{_(this,o,"m",T).call(this)},_(this,l,"f")),"f"),z(this,a,Date.now()+_(this,l,"f"),"f"))},T=function(){0===_(this,h,"f")&&0===_(this,w,"f")&&_(this,f,"f")&&(clearInterval(_(this,f,"f")),z(this,f,void 0,"f")),z(this,h,_(this,i,"f")?_(this,w,"f"):0,"f"),_(this,o,"m",R).call(this)},R=function(){for(;_(this,o,"m",S).call(this););},A=async function(t){return new Promise((e,r)=>{t.addEventListener("abort",()=>{r(new L("The task was aborted."))},{once:!0})})},k=async function(t,e){return new Promise(r=>{let s=()=>{(!e||e())&&(this.off(t,s),r())};this.on(t,s)})};var $=j}}]);