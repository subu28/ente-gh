(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1343],{80162:function(t,e,n){"use strict";var r=n(71600);e.Z=void 0;var a=r(n(68671)),i=n(52322);e.Z=(0,a.default)((0,i.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},81753:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/generate",function(){return n(81249)}])},81249:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var r=n(52903),a=n(96045),i=n(17973),o=n(92660),s=n(901),l=n(50918),c=n(34291),u=n(58627),d=n(89449),p=n(46470),Z=n(42898),h=n(16950),E=n(77754),f=n(95770),S=n(30920),m=n(2299),R=n(10005),_=n(94522),w=n(24450),P=n(24991),A=n(5632),x=n(2784),C=n(66569),v=t=>{let{appContext:e}=t,{appName:n,logout:v}=e,[T,b]=(0,x.useState)(),[y,N]=(0,x.useState)(),[g,O]=(0,x.useState)(!1),[I,H]=(0,x.useState)(!0),k=(0,A.useRouter)();(0,x.useEffect)(()=>{(async()=>{let t=(0,w.km)(w.Qm.ENCRYPTION_KEY),e=(0,R.Yu)(R.Pd.ORIGINAL_KEY_ATTRIBUTES),r=(0,R.Yu)(R.Pd.USER);N(r),(null==r?void 0:r.token)?t?(0,_.fo)()?(O(!0),H(!1)):k.push((0,C.P)(n)):(null==e?void 0:e.encryptedKey)?k.push(l.q.CREDENTIALS):(b(r.token),H(!1)):k.push(l.q.ROOT)})(),e.showNavBar(!0)},[]);let Y=async(t,e)=>{try{let{keyAttributes:e,masterKey:n,srpSetupAttributes:r}=await (0,u.j)(t);await (0,o.p6)((0,i.z)(T),e),await (0,c.Bs)(r),await (0,m.iv)(t,e,n),await (0,m.CP)(w.Qm.ENCRYPTION_KEY,n),(0,_.n_)(!0),O(!0)}catch(t){a.ZP.error("failed to generate password",t),e("passphrase",(0,P.t)("PASSWORD_GENERATION_FAILED"))}};return(0,r.tZ)(r.HY,{children:I||!y?(0,r.tZ)(d.wx,{children:(0,r.tZ)(p.Z,{})}):g?(0,r.tZ)(S.Z,{isMobile:e.isMobile,show:g,onHide:()=>{O(!1),k.push((0,C.P)(n))},somethingWentWrong:()=>{}}):(0,r.tZ)(d.wx,{children:(0,r.BX)(Z.Z,{children:[(0,r.tZ)(E.Z,{children:(0,P.t)("SET_PASSPHRASE")}),(0,r.tZ)(s.Z,{userEmail:y.email,callback:Y,buttonText:(0,P.t)("SET_PASSPHRASE")}),(0,r.tZ)(h.Z,{children:(0,r.tZ)(f.Z,{onClick:v,children:(0,P.t)("GO_BACK")})})]})})})},T=n(77024),b=()=>(0,r.tZ)(v,{appContext:(0,T.useAppContext)()})},901:function(t,e,n){"use strict";var r=n(52903),a=n(49521),i=n(83422),o=n(47290),s=n(62197),l=n(17952),c=n(51464),u=n(24862),d=n(63602),p=n(24991),Z=n(2784),h=n(98614),E=n(48601),f=n(54196);e.Z=function(t){let[e,n]=(0,Z.useState)(!1),[S,m]=(0,Z.useState)(!1),R=()=>{m(!S)},_=t=>{t.preventDefault()},w=async(e,r)=>{let{setFieldError:a}=r;n(!0);try{let{passphrase:n,confirm:r}=e;n===r?await t.callback(n,a):a("confirm",(0,p.t)("PASSPHRASE_MATCH_ERROR"))}catch(e){let t=e instanceof Error?e.message:"";a("confirm","".concat((0,p.t)("UNKNOWN_ERROR")," ").concat(t))}finally{n(!1)}};return(0,r.tZ)(d.J9,{initialValues:{passphrase:"",confirm:""},validationSchema:E.Ry().shape({passphrase:E.Z_().required((0,p.t)("REQUIRED")),confirm:E.Z_().required((0,p.t)("REQUIRED"))}),validateOnChange:!1,validateOnBlur:!1,onSubmit:w,children:n=>{let{values:d,errors:Z,handleChange:E,handleSubmit:m}=n;return(0,r.BX)("form",{noValidate:!0,onSubmit:m,children:[(0,r.tZ)(s.Z,{mb:2,color:"text.muted",variant:"small",children:(0,p.t)("ENTER_ENC_PASSPHRASE")}),(0,r.tZ)(l.Z,{sx:{display:"none"},name:"email",id:"email",autoComplete:"username",type:"email",value:t.userEmail}),(0,r.tZ)(c.Z,{fullWidth:!0,name:"password",id:"password",autoComplete:"new-password",type:S?"text":"password",label:(0,p.t)("PASSPHRASE_HINT"),value:d.passphrase,onChange:E("passphrase"),error:!!Z.passphrase,helperText:Z.passphrase,autoFocus:!0,disabled:e,InputProps:{endAdornment:(0,r.tZ)(i.Z,{showPassword:S,handleClickShowPassword:R,handleMouseDownPassword:_})}}),(0,r.tZ)(c.Z,{fullWidth:!0,name:"confirm-password",id:"confirm-password",autoComplete:"new-password",type:"password",label:(0,p.t)("CONFIRM_PASSPHRASE"),value:d.confirm,onChange:E("confirm"),disabled:e,error:!!Z.confirm,helperText:Z.confirm}),(0,r.tZ)(f.L,{password:d.passphrase}),(0,r.tZ)(s.Z,{my:2,variant:"small",children:(0,r.tZ)(h.cC,{i18nKey:"PASSPHRASE_DISCLAIMER"})}),(0,r.BX)(u.Z,{my:4,children:[(0,r.tZ)(o.Z,{sx:{my:0},loading:e,buttonText:t.buttonText,disabled:(0,a.DZ)(d.passphrase)}),e&&(0,r.tZ)(s.Z,{textAlign:"center",mt:1,color:"text.muted",variant:"small",children:(0,p.t)("KEY_GENERATION_IN_PROGRESS_MESSAGE")})]})]})}})}},66569:function(t,e,n){"use strict";n.d(e,{P:function(){return a}});var r=n(65342);let a=t=>{switch(t){case"accounts":return r.gp.PASSKEYS;case"auth":return r.bW.AUTH;case"photos":return r.Wu.GALLERY}}},65438:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var r=n(52903),a=n(80162),i=n(711),o=n(2672),s=n(85801),l=n(24991),c=n(2784);function u(t){let{code:e,color:n,size:u}=t,[d,p]=(0,c.useState)(!1);return(0,r.tZ)(o.Z,{arrow:!0,open:d,title:(0,l.t)("COPIED"),PopperProps:{sx:{zIndex:2e3}},children:(0,r.tZ)(s.Z,{onClick:()=>{navigator.clipboard.writeText(e),p(!0),setTimeout(()=>p(!1),1e3)},color:n,children:d?(0,r.tZ)(i.Z,{fontSize:null!=u?u:"small"}):(0,r.tZ)(a.Z,{fontSize:null!=u?u:"small"})})})}},73659:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(52903),a=n(89449),i=n(46470);n(2784);var o=n(65438),s=n(73235),l=n(65992),c=n(24862);function u(){let t=(0,s._)(["\n    position: relative;\n    background: ",";\n    border-radius: ","px;\n    min-height: 80px;\n"]);return u=function(){return t},t}function d(){let t=(0,s._)(["\n    position: absolute;\n    top: 0px;\n    right: 0px;\n    margin-top: ",";\n"]);return d=function(){return t},t}function p(){let t=(0,s._)(["\n    padding: 16px 36px 16px 16px;\n    border-radius: ","px;\n"]);return p=function(){return t},t}let Z=(0,l.ZP)(a.Tn)(u(),t=>{let{theme:e}=t;return e.colors.accent.A700},t=>{let{theme:e}=t;return e.shape.borderRadius}),h=(0,l.ZP)(c.Z)(d(),t=>{let{theme:e}=t;return e.spacing(1)}),E=(0,l.ZP)("div")(p(),t=>{let{theme:e}=t;return e.shape.borderRadius});function f(t){let{code:e,wordBreak:n,...s}=t;return e?(0,r.BX)(Z,{...s,children:[(0,r.tZ)(E,{children:(0,r.tZ)(a.lN,{style:{wordBreak:n},children:e})}),(0,r.tZ)(h,{children:(0,r.tZ)(o.Z,{code:e})})]}):(0,r.tZ)(Z,{children:(0,r.tZ)(i.Z,{})})}},42898:function(t,e,n){"use strict";var r=n(65992),a=n(17377);let i=(0,r.ZP)(a.Z)(t=>{let{theme:e}=t;return{padding:e.spacing(4,2),maxWidth:"360px",width:"100%",textAlign:"left"}});e.Z=i},30920:function(t,e,n){"use strict";var r=n(52903),a=n(17973),i=n(73659),o=n(11460),s=n(2299),l=n(86345),c=n(69089),u=n(6060),d=n(62197),p=n(5971),Z=n(8204),h=n(65992),E=n(24862),f=n(36832),S=n(24991),m=n(2784);f.setDefaultWordlist("english"),e.Z=function(t){let{somethingWentWrong:e,isMobile:n,...h}=t,[E,_]=(0,m.useState)(null);return(0,m.useEffect)(()=>{h.show&&(async()=>{try{let t=await (0,s.yr)();_(f.entropyToMnemonic(t))}catch(t){e(),h.onHide()}})()},[h.show]),(0,r.BX)(c.Z,{fullScreen:n,open:h.show,onClose:h.onHide,maxWidth:"xs",children:[(0,r.tZ)(o.Z,{onClose:h.onHide,children:(0,S.t)("RECOVERY_KEY")}),(0,r.BX)(u.Z,{children:[(0,r.tZ)(d.Z,{mb:3,children:(0,S.t)("RECOVERY_KEY_DESCRIPTION")}),(0,r.BX)(R,{children:[(0,r.tZ)(i.Z,{code:E}),(0,r.tZ)(d.Z,{m:2,children:(0,S.t)("KEY_NOT_STORED_DISCLAIMER")})]})]}),(0,r.BX)(p.Z,{children:[(0,r.tZ)(Z.Z,{color:"secondary",size:"large",onClick:h.onHide,children:(0,S.t)("SAVE_LATER")}),(0,r.tZ)(Z.Z,{color:"accent",size:"large",onClick:function(){(0,l.KG)("ente-recovery-key.txt",(0,a.z)(E)),h.onHide()},children:(0,S.t)("SAVE")})]})]})};let R=(0,h.ZP)(E.Z)(t=>{let{theme:e}=t;return{border:"1px dashed ".concat(e.palette.grey.A400),borderRadius:e.spacing(1)}})}},function(t){t.O(0,[8934,1981,3602,4100,7518,3988,2672,3432,6832,3313,1263,2888,9774,179],function(){return t(t.s=81753)}),_N_E=t.O()}]);