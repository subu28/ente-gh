(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{26436:function(t,e,n){"use strict";var r=n(71600);e.Z=void 0;var a=r(n(68671)),i=n(52322);e.Z=(0,a.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},38203:function(t,e,n){"use strict";var r=n(71600);e.Z=void 0;var a=r(n(68671)),i=n(52322);e.Z=(0,a.default)((0,i.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},35469:function(t,e,n){"use strict";n.d(e,{Z:function(){return x}});var r,a=n(31461),i=n(7896),o=n(2784),s=n(40489),l=n(76224),c=n(7342),u=n(62197),d=n(94675),p=n(60433),h=n(65992),Z=n(47645),f=n(6970);function v(t){return(0,f.ZP)("MuiInputAdornment",t)}let m=(0,Z.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var b=n(43853),E=n(52322);let R=["children","className","component","disablePointerEvents","disableTypography","position","variant"],y=t=>{let{classes:e,disablePointerEvents:n,hiddenLabel:r,position:a,size:i,variant:o}=t,s={root:["root",n&&"disablePointerEvents",a&&`position${(0,c.Z)(a)}`,o,r&&"hiddenLabel",i&&`size${(0,c.Z)(i)}`]};return(0,l.Z)(s,v,e)},w=(0,h.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return[e.root,e[`position${(0,c.Z)(n.position)}`],!0===n.disablePointerEvents&&e.disablePointerEvents,e[n.variant]]}})(({theme:t,ownerState:e})=>(0,i.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===e.variant&&{[`&.${m.positionStart}&:not(.${m.hiddenLabel})`]:{marginTop:16}},"start"===e.position&&{marginRight:8},"end"===e.position&&{marginLeft:8},!0===e.disablePointerEvents&&{pointerEvents:"none"}));var x=o.forwardRef(function(t,e){let n=(0,b.Z)({props:t,name:"MuiInputAdornment"}),{children:l,className:c,component:h="div",disablePointerEvents:Z=!1,disableTypography:f=!1,position:v,variant:m}=n,x=(0,a.Z)(n,R),P=(0,p.Z)()||{},g=m;m&&P.variant,P&&!g&&(g=P.variant);let S=(0,i.Z)({},n,{hiddenLabel:P.hiddenLabel,size:P.size,disablePointerEvents:Z,position:v,variant:g}),A=y(S);return(0,E.jsx)(d.Z.Provider,{value:null,children:(0,E.jsx)(w,(0,i.Z)({as:h,ownerState:S,className:(0,s.Z)(A.root,c),ref:e},x,{children:"string"!=typeof l||f?(0,E.jsxs)(o.Fragment,{children:["start"===v?r||(r=(0,E.jsx)("span",{className:"notranslate",children:"â€‹"})):null,l]}):(0,E.jsx)(u.Z,{color:"text.secondary",children:l})}))})})},97946:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(94101)}])},94101:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Z}});var r=n(52903),a=n(89449),i=n(46470),o=n(42898),s=n(10005),l=n(5632),c=n(2784),u=n(98828),d=n(50918),p=t=>{let{appContext:e}=t,{appName:n,showNavBar:p}=e,[h,Z]=(0,c.useState)(!0),f=(0,l.useRouter)();return(0,c.useEffect)(()=>{let t=(0,s.Yu)(s.Pd.USER);(null==t?void 0:t.email)&&f.push(d.q.VERIFY),Z(!1),p(!0)},[]),h?(0,r.tZ)(a.wx,{children:(0,r.tZ)(i.Z,{})}):(0,r.tZ)(a.wx,{children:(0,r.tZ)(o.Z,{children:(0,r.tZ)(u.m,{signUp:()=>{f.push(d.q.SIGNUP)},appName:n})})})},h=n(77024),Z=()=>(0,r.tZ)(p,{appContext:(0,h.useAppContext)()})},88769:function(t,e,n){"use strict";n.d(e,{$Q:function(){return Z},IG:function(){return p},O3:function(){return c},XD:function(){return d},gd:function(){return h},zx:function(){return u}});var r=n(96045),a=n(73873),i=n(95525),o=n(18786),s=n(80613);let l=(0,i.O3)(),c=async t=>{try{return(await a.Z.get("".concat(l,"/users/srp/attributes"),{email:t})).data.attributes}catch(t){return r.ZP.error("failed to get SRP attributes",t),null}},u=async(t,e)=>{try{return(await a.Z.post("".concat(l,"/users/srp/setup"),e,void 0,{"X-Auth-Token":t})).data}catch(t){throw r.ZP.error("failed to post SRP attributes",t),t}},d=async(t,e)=>{try{return(await a.Z.post("".concat(l,"/users/srp/complete"),e,void 0,{"X-Auth-Token":t})).data}catch(t){throw r.ZP.error("failed to complete SRP setup",t),t}},p=async(t,e)=>{try{return(await a.Z.post("".concat(l,"/users/srp/create-session"),{srpUserID:t,srpA:e})).data}catch(t){throw r.ZP.error("createSRPSession failed",t),t}},h=async(t,e,n)=>{try{return(await a.Z.post("".concat(l,"/users/srp/verify-session"),{sessionID:t,srpUserID:e,srpM1:n},void 0)).data}catch(t){if(r.ZP.error("verifySRPSession failed",t),t instanceof o.MS&&t.httpStatusCode===s.WE.Unauthorized)throw Error(o.sH.INCORRECT_PASSWORD);throw t}},Z=async(t,e)=>{try{return(await a.Z.post("".concat(l,"/users/srp/update"),e,void 0,{"X-Auth-Token":t})).data}catch(t){throw r.ZP.error("updateSRPAndKeys failed",t),t}}},98828:function(t,e,n){"use strict";n.d(e,{m:function(){return v}});var r=n(52903),a=n(96045),i=n(16950),o=n(77754),s=n(95770),l=n(69669),c=n(10005),u=n(17952),d=n(24991),p=n(5632),h=n(88769),Z=n(92660),f=n(50918);function v(t){let{appName:e,signUp:n}=t,v=(0,p.useRouter)(),m=async(t,n)=>{try{(0,c.a_)(c.Pd.USER,{email:t});let n=await (0,h.O3)(t);a.ZP.debug(()=>" srpAttributes: ".concat(JSON.stringify(n))),!n||n.isEmailMFAEnabled?(await (0,Z.Tb)(e,t),v.push(f.q.VERIFY)):((0,c.a_)(c.Pd.SRP_ATTRIBUTES,n),v.push(f.q.CREDENTIALS))}catch(t){n(t instanceof Error?"".concat((0,d.t)("UNKNOWN_ERROR")," (reason:").concat(t.message,")"):"".concat((0,d.t)("UNKNOWN_ERROR")," (reason:").concat(JSON.stringify(t),")"))}};return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.Z,{children:(0,d.t)("LOGIN")}),(0,r.tZ)(l.Z,{callback:m,fieldType:"email",placeholder:(0,d.t)("ENTER_EMAIL"),buttonText:(0,d.t)("LOGIN"),autoComplete:"username",hiddenPostInput:(0,r.tZ)(u.Z,{sx:{display:"none"},type:"password",value:""})}),(0,r.tZ)(i.Z,{children:(0,r.tZ)(s.Z,{onClick:n,children:(0,d.t)("NO_ACCOUNT")})})]})}},50918:function(t,e,n){"use strict";var r,a;n.d(e,{q:function(){return r}}),(a=r||(r={})).ROOT="/",a.CHANGE_EMAIL="/change-email",a.CHANGE_PASSWORD="/change-password",a.CREDENTIALS="/credentials",a.GENERATE="/generate",a.LOGIN="/login",a.RECOVER="/recover",a.SIGNUP="/signup",a.TWO_FACTOR_SETUP="/two-factor/setup",a.TWO_FACTOR_VERIFY="/two-factor/verify",a.TWO_FACTOR_RECOVER="/two-factor/recover",a.VERIFY="/verify",a.SHARED_ALBUMS="/shared-albums"},16950:function(t,e,n){"use strict";var r=n(52903),a=n(89449),i=n(56961);n(2784),e.Z=t=>{let{sx:e,style:n,...o}=t;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(i.Z,{}),(0,r.tZ)(a.wx,{style:{flexDirection:"row",...n},sx:{mt:3,...e},...o,children:o.children})]})}},77754:function(t,e,n){"use strict";var r=n(52903),a=n(62197);n(2784),e.Z=t=>{let{sx:e,...n}=t;return(0,r.tZ)(a.Z,{variant:"h2",sx:{mb:8,...e},...n,children:n.children})}},42898:function(t,e,n){"use strict";var r=n(65992),a=n(17377);let i=(0,r.ZP)(a.Z)(t=>{let{theme:e}=t;return{padding:e.spacing(4,2),maxWidth:"360px",width:"100%",textAlign:"left"}});e.Z=i},83422:function(t,e,n){"use strict";var r=n(52903),a=n(26436),i=n(38203),o=n(35469),s=n(85801);n(2784),e.Z=t=>{let{showPassword:e,handleClickShowPassword:n,handleMouseDownPassword:l}=t;return(0,r.tZ)(o.Z,{position:"end",children:(0,r.tZ)(s.Z,{tabIndex:-1,color:"secondary","aria-label":"toggle password visibility",onClick:n,onMouseDown:l,edge:"end",children:e?(0,r.tZ)(i.Z,{}):(0,r.tZ)(a.Z,{})})})}},95770:function(t,e,n){"use strict";var r=n(52903),a=n(23119);n(2784),e.Z=t=>{let{children:e,sx:n,color:i,...o}=t;return(0,r.tZ)(a.Z,{component:"button",sx:{color:"text.base",textDecoration:"underline rgba(255, 255, 255, 0.4)",paddingBottom:.5,"&:hover":{color:"".concat(i,".main"),textDecoration:"underline ",textDecorationColor:"".concat(i,".main")},...n},...o,children:e})}},69669:function(t,e,n){"use strict";n.d(e,{Z:function(){return Z}});var r=n(52903),a=n(89449),i=n(83422),o=n(80982),s=n(8204),l=n(51464),c=n(63602),u=n(24991),d=n(2784),p=n(48601),h=n(47290);function Z(t){var e;let{submitButtonProps:n}=t,{sx:Z,...f}=null!=n?n:{},[v,m]=(0,d.useState)(!1),[b,E]=(0,d.useState)(!1),R=async(e,n)=>{let{setFieldError:r,resetForm:a}=n;m(!0),await t.callback(e.inputValue,t=>r("inputValue",t),a),m(!1)},y=()=>{E(!b)},w=t=>{t.preventDefault()},x=(0,d.useMemo)(()=>{switch(t.fieldType){case"text":case"password":return p.Ry().shape({inputValue:p.Z_().required((0,u.t)("REQUIRED"))});case"email":return p.Ry().shape({inputValue:p.Z_().email((0,u.t)("EMAIL_ERROR")).required((0,u.t)("REQUIRED"))})}},[t.fieldType]);return(0,r.tZ)(c.J9,{initialValues:{inputValue:null!==(e=t.initialValue)&&void 0!==e?e:""},onSubmit:R,validationSchema:x,validateOnChange:!1,validateOnBlur:!1,children:e=>{let{values:n,errors:c,handleChange:d,handleSubmit:p}=e;return(0,r.BX)("form",{noValidate:!0,onSubmit:p,children:[t.hiddenPreInput,(0,r.tZ)(l.Z,{hiddenLabel:t.hiddenLabel,variant:"filled",fullWidth:!0,type:b?"text":t.fieldType,id:t.fieldType,name:t.fieldType,...t.hiddenLabel?{placeholder:t.placeholder}:t.realPlaceholder?{placeholder:t.realPlaceholder,label:t.realLabel}:{label:t.placeholder},value:n.inputValue,onChange:d("inputValue"),error:!!c.inputValue,helperText:c.inputValue,disabled:v,autoFocus:!t.disableAutoFocus,autoComplete:t.autoComplete,InputProps:{autoComplete:t.disableAutoComplete||"password"===t.fieldType?"off":"on",endAdornment:"password"===t.fieldType&&(0,r.tZ)(i.Z,{showPassword:b,handleClickShowPassword:y,handleMouseDownPassword:w})}}),(0,r.tZ)(o.Z,{sx:{position:"relative",top:c.inputValue?"-22px":"0",float:"right",padding:"0 8px"},children:t.caption}),t.hiddenPostInput,(0,r.BX)(a.A0,{justifyContent:"flex-end",flexWrap:t.blockButton?"wrap-reverse":"nowrap",children:[t.secondaryButtonAction&&(0,r.tZ)(s.Z,{onClick:t.secondaryButtonAction,size:"large",color:"secondary",sx:{"&&&":{mt:t.blockButton?.5:2,mb:t.blockButton?0:4,mr:t.blockButton?0:1,...Z}},...f,children:(0,u.t)("CANCEL")}),(0,r.tZ)(h.Z,{sx:{"&&&":{mt:2,...Z}},buttonText:t.buttonText,loading:v,...f})]})]})}})}},47290:function(t,e,n){"use strict";var r=n(52903),a=n(711),i=n(8204),o=n(72841);n(2784),e.Z=t=>{let{loading:e,buttonText:n,disabled:s,success:l,sx:c,...u}=t;return(0,r.tZ)(i.Z,{size:"large",variant:"contained",color:"accent",type:"submit",disabled:s||e||l,sx:{my:4,...e?{"&.Mui-disabled":{backgroundColor:t=>t.colors.accent.A500,color:t=>t.colors.text.base}}:{},...c},...u,children:e?(0,r.tZ)(o.Z,{size:20}):l?(0,r.tZ)(a.Z,{sx:{fontSize:20}}):n})}}},function(t){t.O(0,[3602,4100,2888,9774,179],function(){return t(t.s=97946)}),_N_E=t.O()}]);