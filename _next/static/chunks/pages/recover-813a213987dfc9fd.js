(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{26436:function(e,t,n){"use strict";var a=n(71600);t.Z=void 0;var i=a(n(68671)),r=n(52322);t.Z=(0,i.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},38203:function(e,t,n){"use strict";var a=n(71600);t.Z=void 0;var i=a(n(68671)),r=n(52322);t.Z=(0,i.default)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},35469:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var a,i=n(31461),r=n(7896),o=n(2784),l=n(40489),c=n(76224),s=n(7342),u=n(62197),d=n(94675),p=n(60433),y=n(65992),h=n(47645),f=n(6970);function E(e){return(0,f.ZP)("MuiInputAdornment",e)}let Z=(0,h.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var v=n(43853),m=n(52322);let w=["children","className","component","disablePointerEvents","disableTypography","position","variant"],R=e=>{let{classes:t,disablePointerEvents:n,hiddenLabel:a,position:i,size:r,variant:o}=e,l={root:["root",n&&"disablePointerEvents",i&&`position${(0,s.Z)(i)}`,o,a&&"hiddenLabel",r&&`size${(0,s.Z)(r)}`]};return(0,c.Z)(l,E,t)},T=(0,y.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`position${(0,s.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(({theme:e,ownerState:t})=>(0,r.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${Z.positionStart}&:not(.${Z.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"}));var b=o.forwardRef(function(e,t){let n=(0,v.Z)({props:e,name:"MuiInputAdornment"}),{children:c,className:s,component:y="div",disablePointerEvents:h=!1,disableTypography:f=!1,position:E,variant:Z}=n,b=(0,i.Z)(n,w),g=(0,p.Z)()||{},C=Z;Z&&g.variant,g&&!C&&(C=g.variant);let x=(0,r.Z)({},n,{hiddenLabel:g.hiddenLabel,size:g.size,disablePointerEvents:h,position:E,variant:C}),_=R(x);return(0,m.jsx)(d.Z.Provider,{value:null,children:(0,m.jsx)(T,(0,r.Z)({as:y,ownerState:x,className:(0,l.Z)(_.root,s),ref:t},b,{children:"string"!=typeof c||f?(0,m.jsxs)(o.Fragment,{children:["start"===E?a||(a=(0,m.jsx)("span",{className:"notranslate",children:"â€‹"})):null,c]}):(0,m.jsx)(u.Z,{color:"text.secondary",children:c})}))})})},29856:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recover",function(){return n(65043)}])},65043:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(52903),i=n(96045),r=n(17973),o=n(92660),l=n(50918),c=n(89449),s=n(42898),u=n(16950),d=n(77754),p=n(95770),y=n(69669),h=n(88659),f=n(2299),E=n(66546),Z=n(10005),v=n(24450),m=n(24991),w=n(5632),R=n(2784),T=n(66569);let b=n(36832);b.setDefaultWordlist("english");var g=e=>{let{appContext:t}=e,{appName:n}=t,[g,C]=(0,R.useState)(),x=(0,w.useRouter)();(0,R.useEffect)(()=>{let e=(0,Z.Yu)(Z.Pd.USER),a=(0,Z.Yu)(Z.Pd.KEY_ATTRIBUTES),i=(0,v.km)(v.Qm.ENCRYPTION_KEY);if(!(null==e?void 0:e.email)){x.push(l.q.ROOT);return}if(!(null==e?void 0:e.encryptedToken)&&!(null==e?void 0:e.token)){(0,o.Tb)(n,e.email),E.Z.set(E.i.REDIRECT_URL,l.q.RECOVER),x.push(l.q.VERIFY);return}a?i?x.push((0,T.P)(n)):C(a):x.push(l.q.GENERATE),t.showNavBar(!0)},[]);let _=async(e,t)=>{try{if((e=e.trim().split(" ").map(e=>e.trim()).filter(e=>!!e).join(" ")).indexOf(" ")>0){if(24!==e.split(" ").length)throw Error("recovery code should have 24 words");e=b.mnemonicToEntropy(e)}let t=await h.Z.getInstance(),n=(0,r.z)(g),a=await t.decryptB64(n.masterKeyEncryptedWithRecoveryKey,n.masterKeyDecryptionNonce,await t.fromHex(e));await (0,f.CP)(v.Qm.ENCRYPTION_KEY,a),await (0,f.PN)(n,a),(0,Z.a_)(Z.Pd.SHOW_BACK_BUTTON,{value:!1}),x.push(l.q.CHANGE_PASSWORD)}catch(e){i.ZP.error("password recovery failed",e),t((0,m.t)("INCORRECT_RECOVERY_KEY"))}};return(0,a.tZ)(c.wx,{children:(0,a.BX)(s.Z,{children:[(0,a.tZ)(d.Z,{children:(0,m.t)("RECOVER_ACCOUNT")}),(0,a.tZ)(y.Z,{callback:_,fieldType:"text",placeholder:(0,m.t)("RECOVERY_KEY_HINT"),buttonText:(0,m.t)("RECOVER"),disableAutoComplete:!0}),(0,a.BX)(u.Z,{style:{justifyContent:"space-between"},children:[(0,a.tZ)(p.Z,{onClick:()=>{t.setDialogBoxAttributesV2({title:(0,m.t)("SORRY"),close:{},content:(0,m.t)("NO_RECOVERY_KEY_MESSAGE")})},children:(0,m.t)("NO_RECOVERY_KEY")}),(0,a.tZ)(p.Z,{onClick:x.back,children:(0,m.t)("GO_BACK")})]})]})})},C=n(77024),x=()=>(0,a.tZ)(g,{appContext:(0,C.useAppContext)()})},50918:function(e,t,n){"use strict";var a,i;n.d(t,{q:function(){return a}}),(i=a||(a={})).ROOT="/",i.CHANGE_EMAIL="/change-email",i.CHANGE_PASSWORD="/change-password",i.CREDENTIALS="/credentials",i.GENERATE="/generate",i.LOGIN="/login",i.RECOVER="/recover",i.SIGNUP="/signup",i.TWO_FACTOR_SETUP="/two-factor/setup",i.TWO_FACTOR_VERIFY="/two-factor/verify",i.TWO_FACTOR_RECOVER="/two-factor/recover",i.VERIFY="/verify",i.SHARED_ALBUMS="/shared-albums"},66569:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var a=n(65342);let i=e=>{switch(e){case"accounts":return a.gp.PASSKEYS;case"auth":return a.bW.AUTH;case"photos":return a.Wu.GALLERY}}},16950:function(e,t,n){"use strict";var a=n(52903),i=n(89449),r=n(56961);n(2784),t.Z=e=>{let{sx:t,style:n,...o}=e;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(r.Z,{}),(0,a.tZ)(i.wx,{style:{flexDirection:"row",...n},sx:{mt:3,...t},...o,children:o.children})]})}},77754:function(e,t,n){"use strict";var a=n(52903),i=n(62197);n(2784),t.Z=e=>{let{sx:t,...n}=e;return(0,a.tZ)(i.Z,{variant:"h2",sx:{mb:8,...t},...n,children:n.children})}},42898:function(e,t,n){"use strict";var a=n(65992),i=n(17377);let r=(0,a.ZP)(i.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(4,2),maxWidth:"360px",width:"100%",textAlign:"left"}});t.Z=r},83422:function(e,t,n){"use strict";var a=n(52903),i=n(26436),r=n(38203),o=n(35469),l=n(85801);n(2784),t.Z=e=>{let{showPassword:t,handleClickShowPassword:n,handleMouseDownPassword:c}=e;return(0,a.tZ)(o.Z,{position:"end",children:(0,a.tZ)(l.Z,{tabIndex:-1,color:"secondary","aria-label":"toggle password visibility",onClick:n,onMouseDown:c,edge:"end",children:t?(0,a.tZ)(r.Z,{}):(0,a.tZ)(i.Z,{})})})}},95770:function(e,t,n){"use strict";var a=n(52903),i=n(23119);n(2784),t.Z=e=>{let{children:t,sx:n,color:r,...o}=e;return(0,a.tZ)(i.Z,{component:"button",sx:{color:"text.base",textDecoration:"underline rgba(255, 255, 255, 0.4)",paddingBottom:.5,"&:hover":{color:"".concat(r,".main"),textDecoration:"underline ",textDecorationColor:"".concat(r,".main")},...n},...o,children:t})}},69669:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var a=n(52903),i=n(89449),r=n(83422),o=n(80982),l=n(8204),c=n(51464),s=n(63602),u=n(24991),d=n(2784),p=n(48601),y=n(47290);function h(e){var t;let{submitButtonProps:n}=e,{sx:h,...f}=null!=n?n:{},[E,Z]=(0,d.useState)(!1),[v,m]=(0,d.useState)(!1),w=async(t,n)=>{let{setFieldError:a,resetForm:i}=n;Z(!0),await e.callback(t.inputValue,e=>a("inputValue",e),i),Z(!1)},R=()=>{m(!v)},T=e=>{e.preventDefault()},b=(0,d.useMemo)(()=>{switch(e.fieldType){case"text":case"password":return p.Ry().shape({inputValue:p.Z_().required((0,u.t)("REQUIRED"))});case"email":return p.Ry().shape({inputValue:p.Z_().email((0,u.t)("EMAIL_ERROR")).required((0,u.t)("REQUIRED"))})}},[e.fieldType]);return(0,a.tZ)(s.J9,{initialValues:{inputValue:null!==(t=e.initialValue)&&void 0!==t?t:""},onSubmit:w,validationSchema:b,validateOnChange:!1,validateOnBlur:!1,children:t=>{let{values:n,errors:s,handleChange:d,handleSubmit:p}=t;return(0,a.BX)("form",{noValidate:!0,onSubmit:p,children:[e.hiddenPreInput,(0,a.tZ)(c.Z,{hiddenLabel:e.hiddenLabel,variant:"filled",fullWidth:!0,type:v?"text":e.fieldType,id:e.fieldType,name:e.fieldType,...e.hiddenLabel?{placeholder:e.placeholder}:e.realPlaceholder?{placeholder:e.realPlaceholder,label:e.realLabel}:{label:e.placeholder},value:n.inputValue,onChange:d("inputValue"),error:!!s.inputValue,helperText:s.inputValue,disabled:E,autoFocus:!e.disableAutoFocus,autoComplete:e.autoComplete,InputProps:{autoComplete:e.disableAutoComplete||"password"===e.fieldType?"off":"on",endAdornment:"password"===e.fieldType&&(0,a.tZ)(r.Z,{showPassword:v,handleClickShowPassword:R,handleMouseDownPassword:T})}}),(0,a.tZ)(o.Z,{sx:{position:"relative",top:s.inputValue?"-22px":"0",float:"right",padding:"0 8px"},children:e.caption}),e.hiddenPostInput,(0,a.BX)(i.A0,{justifyContent:"flex-end",flexWrap:e.blockButton?"wrap-reverse":"nowrap",children:[e.secondaryButtonAction&&(0,a.tZ)(l.Z,{onClick:e.secondaryButtonAction,size:"large",color:"secondary",sx:{"&&&":{mt:e.blockButton?.5:2,mb:e.blockButton?0:4,mr:e.blockButton?0:1,...h}},...f,children:(0,u.t)("CANCEL")}),(0,a.tZ)(y.Z,{sx:{"&&&":{mt:2,...h}},buttonText:e.buttonText,loading:E,...f})]})]})}})}},47290:function(e,t,n){"use strict";var a=n(52903),i=n(711),r=n(8204),o=n(72841);n(2784),t.Z=e=>{let{loading:t,buttonText:n,disabled:l,success:c,sx:s,...u}=e;return(0,a.tZ)(r.Z,{size:"large",variant:"contained",color:"accent",type:"submit",disabled:l||t||c,sx:{my:4,...t?{"&.Mui-disabled":{backgroundColor:e=>e.colors.accent.A500,color:e=>e.colors.text.base}}:{},...s},...u,children:t?(0,a.tZ)(o.Z,{size:20}):c?(0,a.tZ)(i.Z,{sx:{fontSize:20}}):n})}},2299:function(e,t,n){"use strict";n.d(t,{CP:function(){return y},OT:function(){return h},PN:function(){return u},iv:function(){return d},uA:function(){return p},yr:function(){return f}});var a=n(96045),i=n(92660),r=n(10005),o=n(94522),l=n(24450),c=n(35042),s=n(88659);async function u(e,t){let n=await s.Z.getInstance(),a=(0,r.Yu)(r.Pd.USER),i=null,{encryptedToken:o}=a;if(o&&o.length>0){let l=await n.decryptB64(e.encryptedSecretKey,e.secretKeyDecryptionNonce,t),c=await n.boxSealOpen(o,e.publicKey,l),s=await n.fromB64(c);i=await n.toB64URLSafe(s),(0,r.a_)(r.Pd.USER,{...a,token:i,encryptedToken:null})}}async function d(e,t,n){let a=await s.Z.getInstance(),i=await a.generateSaltToDeriveKey(),o=await a.deriveInteractiveKey(e,i),l=await a.encryptToB64(n,o.key),c=Object.assign(t,{kekSalt:i,encryptedKey:l.encryptedData,keyDecryptionNonce:l.nonce,opsLimit:o.opsLimit,memLimit:o.memLimit});return(0,r.a_)(r.Pd.KEY_ATTRIBUTES,c),c}let p=async e=>{let t=await s.Z.getInstance(),n=await t.generateSubKey(e,32,1,"loginctx"),a=await t.fromB64(n);return await t.toB64(a.slice(0,16))},y=async(e,t,n)=>{let a=await s.Z.getInstance(),i=await a.generateKeyAndEncryptToB64(t);(0,l.Dt)(e,i);let r=globalThis.electron;r&&!n&&e===l.Qm.ENCRYPTION_KEY&&r.saveEncryptionKey(t)};async function h(e){let t=await s.Z.getInstance(),n=await f(),a=await t.fromHex(n);return await t.encryptToB64(e,a)}let f=async()=>{try{let e;let t=await s.Z.getInstance(),{recoveryKeyEncryptedWithMasterKey:n,recoveryKeyDecryptionNonce:a}=(0,r.Yu)(r.Pd.KEY_ATTRIBUTES),i=await (0,c.G)();return e=n?await t.decryptB64(n,a,i):await E(),e=await t.toHex(e)}catch(e){throw console.log(e),a.ZP.error("getRecoveryKey failed",e),e}};async function E(){let e=await (0,c.G)(),t=(0,r.Yu)(r.Pd.KEY_ATTRIBUTES),n=await s.Z.getInstance(),a=await n.generateEncryptionKey(),l=await n.encryptToB64(e,a),u=await n.encryptToB64(a,e),d={masterKeyEncryptedWithRecoveryKey:l.encryptedData,masterKeyDecryptionNonce:l.nonce,recoveryKeyEncryptedWithMasterKey:u.encryptedData,recoveryKeyDecryptionNonce:u.nonce};await (0,i.Jl)((0,o.LP)(),d);let p=Object.assign(t,d);return(0,r.a_)(r.Pd.KEY_ATTRIBUTES,p),a}}},function(e){e.O(0,[3602,4100,6832,2888,9774,179],function(){return e(e.s=29856)}),_N_E=e.O()}]);