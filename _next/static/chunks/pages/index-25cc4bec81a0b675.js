(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{87314:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(36400)}])},36400:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var i=t(73235),a=t(52903),r=t(96045),l=t(98828),o=t(39568),c=t(73370),d=t(46470),s=t(65342),u=t(2299),h=t(95525),p=t(89610),m=t(10005),Z=t(94522),f=t(24450),E=t(8204),_=t(65992),x=t(62197),g=t(24991),R=t(5632),S=t(98402);t(26693);var b=t(2784),w=t(98614),y=t(77024);function I(){let e=(0,i._)(["\n    display: flex;\n    flex: 1;\n    align-items: center;\n    justify-content: center;\n    background-color: #000;\n\n    @media (max-width: 1024px) {\n        flex-direction: column;\n    }\n"]);return I=function(){return e},e}function T(){let e=(0,i._)(["\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n\n    @media (max-width: 1024px) {\n        flex-grow: 0;\n    }\n"]);return T=function(){return e},e}function C(){let e=(0,i._)(["\n    margin-block-end: 64px;\n"]);return C=function(){return e},e}function P(){let e=(0,i._)(["\n    flex: 1;\n    height: 100%;\n    padding: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #242424;\n\n    @media (max-width: 1024px) {\n        display: none;\n    }\n"]);return P=function(){return e},e}function A(){let e=(0,i._)(["\n    display: none;\n\n    @media (max-width: 1024px) {\n        max-width: 375px;\n        width: 100%;\n        padding: 12px;\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n    }\n"]);return A=function(){return e},e}function N(){let e=(0,i._)(["\n    display: flex;\n    flex-direction: column;\n    min-width: 320px;\n"]);return N=function(){return e},e}function O(){let e=(0,i._)(["\n    height: 250px;\n    object-fit: contain;\n\n    @media (max-width: 400px) {\n        height: 180px;\n    }\n"]);return O=function(){return e},e}function L(){let e=(0,i._)(["\n    margin-block-start: 2px;\n    margin-block-end: 24px;\n\n    button {\n        margin-inline-end: 14px;\n        width: 10px;\n        height: 10px;\n        border-radius: 50%;\n        padding: 0;\n        border: 0;\n        background-color: #fff;\n        opacity: 0.5;\n        transition: opacity 0.6s ease;\n    }\n\n    button.carousel__dot--selected {\n        background-color: #51cd7c;\n        opacity: 1;\n    }\n"]);return L=function(){return e},e}function v(){let e=(0,i._)(["\n    display: flex;\n    flex-direction: column;\n"]);return v=function(){return e},e}function k(){let{appName:e,showNavBar:n,setDialogMessage:t}=(0,y.useAppContext)(),i=(0,R.useRouter)(),[_,x]=(0,b.useState)(!0),[S,w]=(0,b.useState)(!0);(0,b.useEffect)(()=>{n(!1);let e=new URL(window.location.href),t=new URL((0,h.cz)());e.pathname=i.pathname,e.host===t.host&&e.pathname!==s.Wu.SHARED_ALBUMS?I(e):T()},[]);let I=async e=>{let n=e.hash.lastIndexOf("&"),t=e.hash.slice(1,-1!==n?n:void 0);await i.replace({pathname:s.Wu.SHARED_ALBUMS,search:e.search,hash:t}),await C()},T=async()=>{let e=(0,m.Yu)(m.Pd.USER),n=(0,f.km)(f.Qm.ENCRYPTION_KEY),t=globalThis.electron;if(!n&&t){try{n=await t.encryptionKey()}catch(e){r.ZP.error("Failed to get encryption key from electron",e)}n&&await (0,u.CP)(f.Qm.ENCRYPTION_KEY,n,!0)}let a=(0,Z.LP)();n&&a?await i.push(s.Wu.GALLERY):(null==e?void 0:e.email)&&await i.push(s.Wu.VERIFY),await C(),x(!1)},C=async()=>{try{await p.Z.ready()}catch(e){r.ZP.error("usage in incognito mode tried",e),t({title:(0,g.t)("LOCAL_STORAGE_NOT_ACCESSIBLE"),nonClosable:!0,content:(0,g.t)("LOCAL_STORAGE_NOT_ACCESSIBLE_MESSAGE")})}finally{x(!1)}};return(0,a.tZ)(B,{children:_?(0,a.tZ)(d.Z,{}):(0,a.BX)(a.HY,{children:[(0,a.BX)(U,{children:[(0,a.tZ)(D,{children:(0,a.tZ)(c.W,{height:24})}),(0,a.tZ)(W,{})]}),(0,a.BX)(M,{children:[(0,a.tZ)(E.Z,{color:"accent",size:"large",onClick:()=>i.push(s.Wu.SIGNUP),children:(0,g.t)("NEW_USER")}),(0,a.tZ)(E.Z,{size:"large",onClick:()=>i.push(s.Wu.LOGIN),children:(0,g.t)("EXISTING_USER")})]}),(0,a.tZ)(X,{children:(0,a.tZ)(H,{children:S?(0,a.tZ)(l.m,{signUp:()=>w(!1),appName:e}):(0,a.tZ)(o.M,{router:i,appName:e,login:()=>w(!0)})})})]})})}let B=(0,_.ZP)("div")(I()),U=(0,_.ZP)("div")(T()),D=(0,_.ZP)("div")(C()),X=(0,_.ZP)("div")(P()),M=(0,_.ZP)("div")(A()),H=(0,_.ZP)("div")(N()),W=()=>(0,a.BX)(S.sj,{naturalSlideWidth:400,naturalSlideHeight:300,isIntrinsicHeight:!0,totalSlides:3,isPlaying:!0,children:[(0,a.BX)(S.iR,{children:[(0,a.BX)(S.Mi,{index:0,children:[(0,a.tZ)(G,{src:"/images/onboarding-lock/1x.png",srcSet:"/images/onboarding-lock/2x.png 2x, /images/onboarding-lock/3x.png 3x"}),(0,a.tZ)(Y,{children:(0,a.tZ)(w.cC,{i18nKey:"HERO_SLIDE_1_TITLE"})}),(0,a.tZ)(V,{children:(0,g.t)("HERO_SLIDE_1")})]}),(0,a.tZ)(S.Mi,{index:1,children:(0,a.BX)(K,{children:[(0,a.tZ)(G,{src:"/images/onboarding-safe/1x.png",srcSet:"/images/onboarding-safe/2x.png 2x, /images/onboarding-safe/3x.png 3x"}),(0,a.tZ)(Y,{children:(0,a.tZ)(w.cC,{i18nKey:"HERO_SLIDE_2_TITLE"})}),(0,a.tZ)(V,{children:(0,g.t)("HERO_SLIDE_2")})]})}),(0,a.tZ)(S.Mi,{index:2,children:(0,a.BX)(K,{children:[(0,a.tZ)(G,{src:"/images/onboarding-sync/1x.png",srcSet:"/images/onboarding-sync/2x.png 2x, /images/onboarding-sync/3x.png 3x"}),(0,a.tZ)(Y,{children:(0,a.tZ)(w.cC,{i18nKey:"HERO_SLIDE_3_TITLE"})}),(0,a.tZ)(V,{children:(0,g.t)("HERO_SLIDE_3")})]})})]}),(0,a.tZ)(F,{})]}),V=e=>(0,a.tZ)(x.Z,{color:"text.muted",mt:2,mb:3,...e}),Y=e=>(0,a.tZ)(x.Z,{variant:"h3",mt:4,...e}),G=(0,_.ZP)("img")(O()),F=(0,_.ZP)(S.I5)(L()),K=(0,_.ZP)("div")(v())},98828:function(e,n,t){"use strict";t.d(n,{m:function(){return f}});var i=t(52903),a=t(96045),r=t(16950),l=t(77754),o=t(95770),c=t(69669),d=t(10005),s=t(17952),u=t(24991),h=t(5632),p=t(88769),m=t(92660),Z=t(50918);function f(e){let{appName:n,signUp:t}=e,f=(0,h.useRouter)(),E=async(e,t)=>{try{(0,d.a_)(d.Pd.USER,{email:e});let t=await (0,p.O3)(e);a.ZP.debug(()=>" srpAttributes: ".concat(JSON.stringify(t))),!t||t.isEmailMFAEnabled?(await (0,m.Tb)(n,e),f.push(Z.q.VERIFY)):((0,d.a_)(d.Pd.SRP_ATTRIBUTES,t),f.push(Z.q.CREDENTIALS))}catch(e){t(e instanceof Error?"".concat((0,u.t)("UNKNOWN_ERROR")," (reason:").concat(e.message,")"):"".concat((0,u.t)("UNKNOWN_ERROR")," (reason:").concat(JSON.stringify(e),")"))}};return(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.Z,{children:(0,u.t)("LOGIN")}),(0,i.tZ)(c.Z,{callback:E,fieldType:"email",placeholder:(0,u.t)("ENTER_EMAIL"),buttonText:(0,u.t)("LOGIN"),autoComplete:"username",hiddenPostInput:(0,i.tZ)(s.Z,{sx:{display:"none"},type:"password",value:""})}),(0,i.tZ)(r.Z,{children:(0,i.tZ)(o.Z,{onClick:t,children:(0,u.t)("NO_ACCOUNT")})})]})}},39568:function(e,n,t){"use strict";t.d(n,{M:function(){return B}});var i=t(52903),a=t(96045),r=t(92660),l=t(54196),o=t(50918),c=t(49521),d=t(58627),s=t(10005),u=t(89449),h=t(16950),p=t(77754),m=t(83422),Z=t(95770),f=t(47290),E=t(2299),_=t(94522),x=t(24450),g=t(89025),R=t(51464),S=t(24862),b=t(62197),w=t(35469),y=t(2672),I=t(85801),T=t(93506),C=t(52616),P=t(61035),A=t(23119),N=t(63602),O=t(24991),L=t(2784),v=t(98614),k=t(48601);function B(e){let{router:n,appName:t,login:B}=e,[U,D]=(0,L.useState)(!1),[X,M]=(0,L.useState)(!1),[H,W]=(0,L.useState)(!1),V=()=>{W(!H)},Y=e=>{e.preventDefault()},G=async(e,i)=>{let{email:l,passphrase:c,confirm:u,referral:h}=e,{setFieldError:p}=i;try{if(c!==u){p("confirm",(0,O.t)("PASSPHRASE_MATCH_ERROR"));return}M(!0);try{(0,s.a_)(s.Pd.USER,{email:l}),(0,_.je)(h),await (0,r.Tb)(t,l)}catch(n){let e=n instanceof Error?n.message:"";throw p("confirm","".concat((0,O.t)("UNKNOWN_ERROR")," ").concat(e)),n}try{let{keyAttributes:e,masterKey:t,srpSetupAttributes:i}=await (0,d.j)(c);(0,s.a_)(s.Pd.ORIGINAL_KEY_ATTRIBUTES,e),(0,s.a_)(s.Pd.SRP_SETUP_ATTRIBUTES,i),await (0,E.iv)(c,e,t),await (0,E.CP)(x.Qm.ENCRYPTION_KEY,t),(0,_.n_)(!0),n.push(o.q.VERIFY)}catch(e){throw p("confirm",(0,O.t)("PASSWORD_GENERATION_FAILED")),e}}catch(e){a.ZP.error("signup failed",e)}M(!1)};return(0,i.BX)(i.HY,{children:[(0,i.BX)(p.Z,{children:[" ",(0,O.t)("SIGN_UP")]}),(0,i.tZ)(N.J9,{initialValues:{email:"",passphrase:"",confirm:"",referral:""},validationSchema:k.Ry().shape({email:k.Z_().email((0,O.t)("EMAIL_ERROR")).required((0,O.t)("REQUIRED")),passphrase:k.Z_().required((0,O.t)("REQUIRED")),confirm:k.Z_().required((0,O.t)("REQUIRED"))}),validateOnChange:!1,validateOnBlur:!1,onSubmit:G,children:e=>{let{values:n,errors:t,handleChange:a,handleSubmit:r}=e;return(0,i.BX)("form",{noValidate:!0,onSubmit:r,children:[(0,i.BX)(u.wx,{sx:{mb:1},children:[(0,i.tZ)(R.Z,{fullWidth:!0,id:"email",name:"email",autoComplete:"username",type:"email",label:(0,O.t)("ENTER_EMAIL"),value:n.email,onChange:a("email"),error:!!t.email,helperText:t.email,autoFocus:!0,disabled:X}),(0,i.tZ)(R.Z,{fullWidth:!0,id:"password",name:"password",autoComplete:"new-password",type:H?"text":"password",label:(0,O.t)("PASSPHRASE_HINT"),value:n.passphrase,onChange:a("passphrase"),error:!!t.passphrase,helperText:t.passphrase,disabled:X,InputProps:{endAdornment:(0,i.tZ)(m.Z,{showPassword:H,handleClickShowPassword:V,handleMouseDownPassword:Y})}}),(0,i.tZ)(R.Z,{fullWidth:!0,id:"confirm-password",name:"confirm-password",autoComplete:"new-password",type:"password",label:(0,O.t)("CONFIRM_PASSPHRASE"),value:n.confirm,onChange:a("confirm"),error:!!t.confirm,helperText:t.confirm,disabled:X}),(0,i.tZ)(l.L,{password:n.passphrase}),(0,i.BX)(S.Z,{sx:{width:"100%"},children:[(0,i.tZ)(b.Z,{textAlign:"left",color:"text.secondary",mt:"24px",children:(0,O.t)("REFERRAL_CODE_HINT")}),(0,i.tZ)(R.Z,{hiddenLabel:!0,InputProps:{endAdornment:(0,i.tZ)(w.Z,{position:"end",children:(0,i.tZ)(y.Z,{title:(0,O.t)("REFERRAL_INFO"),children:(0,i.tZ)(I.Z,{tabIndex:-1,color:"secondary",edge:"end",children:(0,i.tZ)(g.Z,{})})})})},fullWidth:!0,name:"referral",type:"text",value:n.referral,onChange:a("referral"),error:!!t.referral,disabled:X})]}),(0,i.tZ)(T.Z,{sx:{width:"100%"},children:(0,i.tZ)(C.Z,{sx:{color:"text.muted",ml:0,mt:2,mb:0},control:(0,i.tZ)(P.Z,{size:"small",disabled:X,checked:U,onChange:e=>D(e.target.checked),color:"accent"}),label:(0,i.tZ)(b.Z,{variant:"small",children:(0,i.tZ)(v.cC,{i18nKey:"TERMS_AND_CONDITIONS",components:{a:(0,i.tZ)(A.Z,{href:"https://ente.io/terms",target:"_blank"}),b:(0,i.tZ)(A.Z,{href:"https://ente.io/privacy",target:"_blank"})}})})})})]}),(0,i.BX)(S.Z,{mb:4,children:[(0,i.tZ)(f.Z,{sx:{my:0},buttonText:(0,O.t)("CREATE_ACCOUNT"),loading:X,disabled:!U||(0,c.DZ)(n.passphrase)}),X&&(0,i.tZ)(b.Z,{mt:1,textAlign:"center",color:"text.muted",variant:"small",children:(0,O.t)("KEY_GENERATION_IN_PROGRESS_MESSAGE")})]})]})}}),(0,i.tZ)(h.Z,{children:(0,i.tZ)(Z.Z,{onClick:B,children:(0,O.t)("ACCOUNT_EXISTS")})})]})}},69669:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(52903),a=t(89449),r=t(83422),l=t(80982),o=t(8204),c=t(51464),d=t(63602),s=t(24991),u=t(2784),h=t(48601),p=t(47290);function m(e){var n;let{submitButtonProps:t}=e,{sx:m,...Z}=null!=t?t:{},[f,E]=(0,u.useState)(!1),[_,x]=(0,u.useState)(!1),g=async(n,t)=>{let{setFieldError:i,resetForm:a}=t;E(!0),await e.callback(n.inputValue,e=>i("inputValue",e),a),E(!1)},R=()=>{x(!_)},S=e=>{e.preventDefault()},b=(0,u.useMemo)(()=>{switch(e.fieldType){case"text":case"password":return h.Ry().shape({inputValue:h.Z_().required((0,s.t)("REQUIRED"))});case"email":return h.Ry().shape({inputValue:h.Z_().email((0,s.t)("EMAIL_ERROR")).required((0,s.t)("REQUIRED"))})}},[e.fieldType]);return(0,i.tZ)(d.J9,{initialValues:{inputValue:null!==(n=e.initialValue)&&void 0!==n?n:""},onSubmit:g,validationSchema:b,validateOnChange:!1,validateOnBlur:!1,children:n=>{let{values:t,errors:d,handleChange:u,handleSubmit:h}=n;return(0,i.BX)("form",{noValidate:!0,onSubmit:h,children:[e.hiddenPreInput,(0,i.tZ)(c.Z,{hiddenLabel:e.hiddenLabel,variant:"filled",fullWidth:!0,type:_?"text":e.fieldType,id:e.fieldType,name:e.fieldType,...e.hiddenLabel?{placeholder:e.placeholder}:e.realPlaceholder?{placeholder:e.realPlaceholder,label:e.realLabel}:{label:e.placeholder},value:t.inputValue,onChange:u("inputValue"),error:!!d.inputValue,helperText:d.inputValue,disabled:f,autoFocus:!e.disableAutoFocus,autoComplete:e.autoComplete,InputProps:{autoComplete:e.disableAutoComplete||"password"===e.fieldType?"off":"on",endAdornment:"password"===e.fieldType&&(0,i.tZ)(r.Z,{showPassword:_,handleClickShowPassword:R,handleMouseDownPassword:S})}}),(0,i.tZ)(l.Z,{sx:{position:"relative",top:d.inputValue?"-22px":"0",float:"right",padding:"0 8px"},children:e.caption}),e.hiddenPostInput,(0,i.BX)(a.A0,{justifyContent:"flex-end",flexWrap:e.blockButton?"wrap-reverse":"nowrap",children:[e.secondaryButtonAction&&(0,i.tZ)(o.Z,{onClick:e.secondaryButtonAction,size:"large",color:"secondary",sx:{"&&&":{mt:e.blockButton?.5:2,mb:e.blockButton?0:4,mr:e.blockButton?0:1,...m}},...Z,children:(0,s.t)("CANCEL")}),(0,i.tZ)(p.Z,{sx:{"&&&":{mt:2,...m}},buttonText:e.buttonText,loading:f,...Z})]})]})}})}}},function(e){e.O(0,[8934,1981,3602,4100,7518,3988,2672,3432,3313,7332,4308,1263,2888,9774,179],function(){return e(e.s=87314)}),_N_E=e.O()}]);