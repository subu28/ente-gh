(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9740],{26436:function(t,e,n){"use strict";var o=n(71600);e.Z=void 0;var i=o(n(68671)),r=n(52322);e.Z=(0,i.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},38203:function(t,e,n){"use strict";var o=n(71600);e.Z=void 0;var i=o(n(68671)),r=n(52322);e.Z=(0,i.default)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},35469:function(t,e,n){"use strict";n.d(e,{Z:function(){return w}});var o,i=n(31461),r=n(7896),a=n(2784),l=n(40489),c=n(76224),s=n(7342),d=n(62197),u=n(94675),p=n(60433),h=n(65992),f=n(47645),Z=n(6970);function E(t){return(0,Z.ZP)("MuiInputAdornment",t)}let v=(0,f.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var m=n(43853),b=n(52322);let y=["children","className","component","disablePointerEvents","disableTypography","position","variant"],R=t=>{let{classes:e,disablePointerEvents:n,hiddenLabel:o,position:i,size:r,variant:a}=t,l={root:["root",n&&"disablePointerEvents",i&&`position${(0,s.Z)(i)}`,a,o&&"hiddenLabel",r&&`size${(0,s.Z)(r)}`]};return(0,c.Z)(l,E,e)},C=(0,h.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(t,e)=>{let{ownerState:n}=t;return[e.root,e[`position${(0,s.Z)(n.position)}`],!0===n.disablePointerEvents&&e.disablePointerEvents,e[n.variant]]}})(({theme:t,ownerState:e})=>(0,r.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===e.variant&&{[`&.${v.positionStart}&:not(.${v.hiddenLabel})`]:{marginTop:16}},"start"===e.position&&{marginRight:8},"end"===e.position&&{marginLeft:8},!0===e.disablePointerEvents&&{pointerEvents:"none"}));var w=a.forwardRef(function(t,e){let n=(0,m.Z)({props:t,name:"MuiInputAdornment"}),{children:c,className:s,component:h="div",disablePointerEvents:f=!1,disableTypography:Z=!1,position:E,variant:v}=n,w=(0,i.Z)(n,y),x=(0,p.Z)()||{},T=v;v&&x.variant,x&&!T&&(T=x.variant);let _=(0,r.Z)({},n,{hiddenLabel:x.hiddenLabel,size:x.size,disablePointerEvents:f,position:E,variant:T}),O=R(_);return(0,b.jsx)(u.Z.Provider,{value:null,children:(0,b.jsx)(C,(0,r.Z)({as:h,ownerState:_,className:(0,l.Z)(O.root,s),ref:e},w,{children:"string"!=typeof c||Z?(0,b.jsxs)(a.Fragment,{children:["start"===E?o||(o=(0,b.jsx)("span",{className:"notranslate",children:"â€‹"})):null,c]}):(0,b.jsx)(d.Z,{color:"text.secondary",children:c})}))})})},50574:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/two-factor/recover",function(){return n(34294)}])},34294:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return O}});var o=n(52903),i=n(96045),r=n(17973),a=n(92660),l=n(50918),c=n(89449),s=n(42898),d=n(16950),u=n(77754),p=n(95770),h=n(69669),f=n(72176),Z=n(88659),E=n(18786),v=n(10005),m=n(23119),b=n(80613),y=n(24991),R=n(5632),C=n(2784),w=n(98614);let x=n(36832);x.setDefaultWordlist("english");var T=t=>{let{appContext:e,twoFactorType:n}=t,{logout:T}=e,[_,O]=(0,C.useState)(null),[A,S]=(0,C.useState)(null),[g,P]=(0,C.useState)(!1),I=(0,R.useRouter)();(0,C.useEffect)(()=>{let t=(0,v.Yu)(v.Pd.USER);t&&t.email&&t.twoFactorSessionID?!t.isTwoFactorEnabled&&(t.encryptedToken||t.token)?I.push(l.q.GENERATE):S(t.twoFactorSessionID):I.push(l.q.ROOT),(async()=>{try{let e=await (0,a.fG)(t.twoFactorSessionID,n);P(!!e.encryptedSecret),e.encryptedSecret?O({encryptedData:e.encryptedSecret,nonce:e.secretDecryptionNonce}):N({text:(0,y.t)("GO_BACK"),action:I.back})}catch(t){t instanceof E.MS&&t.httpStatusCode===b.WE.NotFound?T():(i.ZP.error("two factor recovery page setup failed",t),P(!1),N({text:(0,y.t)("GO_BACK"),action:I.back}))}})()},[]);let V=async(t,e)=>{try{if((t=t.trim().split(" ").map(t=>t.trim()).filter(t=>!!t).join(" ")).indexOf(" ")>0){if(24!==t.split(" ").length)throw Error("recovery code should have 24 words");t=x.mnemonicToEntropy(t)}let e=await Z.Z.getInstance(),{encryptedData:o,nonce:i}=(0,r.z)(_),c=await e.decryptB64(o,i,await e.fromHex(t)),{keyAttributes:s,encryptedToken:d,token:u,id:p}=await (0,a.Jr)((0,r.z)(A),c,n);(0,v.a_)(v.Pd.USER,{...(0,v.Yu)(v.Pd.USER),token:u,encryptedToken:d,id:p,isTwoFactorEnabled:!1}),(0,v.a_)(v.Pd.KEY_ATTRIBUTES,s),I.push(l.q.CREDENTIALS)}catch(t){i.ZP.error("two factor recovery failed",t),e((0,y.t)("INCORRECT_RECOVERY_KEY"))}},N=t=>{e.setDialogBoxAttributesV2({title:(0,y.t)("CONTACT_SUPPORT"),close:null!=t?t:{},content:(0,o.tZ)(w.cC,{i18nKey:"NO_TWO_FACTOR_RECOVERY_KEY_MESSAGE",values:{emailID:f.Xy},components:{a:(0,o.tZ)(m.Z,{href:"mailto:".concat(f.Xy)})}})})};return g?(0,o.tZ)(c.wx,{children:(0,o.BX)(s.Z,{children:[(0,o.tZ)(u.Z,{children:(0,y.t)("RECOVER_TWO_FACTOR")}),(0,o.tZ)(h.Z,{callback:V,fieldType:"text",placeholder:(0,y.t)("RECOVERY_KEY_HINT"),buttonText:(0,y.t)("RECOVER"),disableAutoComplete:!0}),(0,o.BX)(d.Z,{style:{justifyContent:"space-between"},children:[(0,o.tZ)(p.Z,{onClick:()=>N(),children:(0,y.t)("NO_RECOVERY_KEY")}),(0,o.tZ)(p.Z,{onClick:I.back,children:(0,y.t)("GO_BACK")})]})]})}):(0,o.tZ)(o.HY,{})},_=n(77024),O=()=>(0,o.tZ)(T,{appContext:(0,_.useAppContext)(),twoFactorType:"totp"})},50918:function(t,e,n){"use strict";var o,i;n.d(e,{q:function(){return o}}),(i=o||(o={})).ROOT="/",i.CHANGE_EMAIL="/change-email",i.CHANGE_PASSWORD="/change-password",i.CREDENTIALS="/credentials",i.GENERATE="/generate",i.LOGIN="/login",i.RECOVER="/recover",i.SIGNUP="/signup",i.TWO_FACTOR_SETUP="/two-factor/setup",i.TWO_FACTOR_VERIFY="/two-factor/verify",i.TWO_FACTOR_RECOVER="/two-factor/recover",i.VERIFY="/verify",i.SHARED_ALBUMS="/shared-albums"},16950:function(t,e,n){"use strict";var o=n(52903),i=n(89449),r=n(56961);n(2784),e.Z=t=>{let{sx:e,style:n,...a}=t;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(r.Z,{}),(0,o.tZ)(i.wx,{style:{flexDirection:"row",...n},sx:{mt:3,...e},...a,children:a.children})]})}},77754:function(t,e,n){"use strict";var o=n(52903),i=n(62197);n(2784),e.Z=t=>{let{sx:e,...n}=t;return(0,o.tZ)(i.Z,{variant:"h2",sx:{mb:8,...e},...n,children:n.children})}},42898:function(t,e,n){"use strict";var o=n(65992),i=n(17377);let r=(0,o.ZP)(i.Z)(t=>{let{theme:e}=t;return{padding:e.spacing(4,2),maxWidth:"360px",width:"100%",textAlign:"left"}});e.Z=r},83422:function(t,e,n){"use strict";var o=n(52903),i=n(26436),r=n(38203),a=n(35469),l=n(85801);n(2784),e.Z=t=>{let{showPassword:e,handleClickShowPassword:n,handleMouseDownPassword:c}=t;return(0,o.tZ)(a.Z,{position:"end",children:(0,o.tZ)(l.Z,{tabIndex:-1,color:"secondary","aria-label":"toggle password visibility",onClick:n,onMouseDown:c,edge:"end",children:e?(0,o.tZ)(r.Z,{}):(0,o.tZ)(i.Z,{})})})}},95770:function(t,e,n){"use strict";var o=n(52903),i=n(23119);n(2784),e.Z=t=>{let{children:e,sx:n,color:r,...a}=t;return(0,o.tZ)(i.Z,{component:"button",sx:{color:"text.base",textDecoration:"underline rgba(255, 255, 255, 0.4)",paddingBottom:.5,"&:hover":{color:"".concat(r,".main"),textDecoration:"underline ",textDecorationColor:"".concat(r,".main")},...n},...a,children:e})}},69669:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var o=n(52903),i=n(89449),r=n(83422),a=n(80982),l=n(8204),c=n(51464),s=n(63602),d=n(24991),u=n(2784),p=n(48601),h=n(47290);function f(t){var e;let{submitButtonProps:n}=t,{sx:f,...Z}=null!=n?n:{},[E,v]=(0,u.useState)(!1),[m,b]=(0,u.useState)(!1),y=async(e,n)=>{let{setFieldError:o,resetForm:i}=n;v(!0),await t.callback(e.inputValue,t=>o("inputValue",t),i),v(!1)},R=()=>{b(!m)},C=t=>{t.preventDefault()},w=(0,u.useMemo)(()=>{switch(t.fieldType){case"text":case"password":return p.Ry().shape({inputValue:p.Z_().required((0,d.t)("REQUIRED"))});case"email":return p.Ry().shape({inputValue:p.Z_().email((0,d.t)("EMAIL_ERROR")).required((0,d.t)("REQUIRED"))})}},[t.fieldType]);return(0,o.tZ)(s.J9,{initialValues:{inputValue:null!==(e=t.initialValue)&&void 0!==e?e:""},onSubmit:y,validationSchema:w,validateOnChange:!1,validateOnBlur:!1,children:e=>{let{values:n,errors:s,handleChange:u,handleSubmit:p}=e;return(0,o.BX)("form",{noValidate:!0,onSubmit:p,children:[t.hiddenPreInput,(0,o.tZ)(c.Z,{hiddenLabel:t.hiddenLabel,variant:"filled",fullWidth:!0,type:m?"text":t.fieldType,id:t.fieldType,name:t.fieldType,...t.hiddenLabel?{placeholder:t.placeholder}:t.realPlaceholder?{placeholder:t.realPlaceholder,label:t.realLabel}:{label:t.placeholder},value:n.inputValue,onChange:u("inputValue"),error:!!s.inputValue,helperText:s.inputValue,disabled:E,autoFocus:!t.disableAutoFocus,autoComplete:t.autoComplete,InputProps:{autoComplete:t.disableAutoComplete||"password"===t.fieldType?"off":"on",endAdornment:"password"===t.fieldType&&(0,o.tZ)(r.Z,{showPassword:m,handleClickShowPassword:R,handleMouseDownPassword:C})}}),(0,o.tZ)(a.Z,{sx:{position:"relative",top:s.inputValue?"-22px":"0",float:"right",padding:"0 8px"},children:t.caption}),t.hiddenPostInput,(0,o.BX)(i.A0,{justifyContent:"flex-end",flexWrap:t.blockButton?"wrap-reverse":"nowrap",children:[t.secondaryButtonAction&&(0,o.tZ)(l.Z,{onClick:t.secondaryButtonAction,size:"large",color:"secondary",sx:{"&&&":{mt:t.blockButton?.5:2,mb:t.blockButton?0:4,mr:t.blockButton?0:1,...f}},...Z,children:(0,d.t)("CANCEL")}),(0,o.tZ)(h.Z,{sx:{"&&&":{mt:2,...f}},buttonText:t.buttonText,loading:E,...Z})]})]})}})}},47290:function(t,e,n){"use strict";var o=n(52903),i=n(711),r=n(8204),a=n(72841);n(2784),e.Z=t=>{let{loading:e,buttonText:n,disabled:l,success:c,sx:s,...d}=t;return(0,o.tZ)(r.Z,{size:"large",variant:"contained",color:"accent",type:"submit",disabled:l||e||c,sx:{my:4,...e?{"&.Mui-disabled":{backgroundColor:t=>t.colors.accent.A500,color:t=>t.colors.text.base}}:{},...s},...d,children:e?(0,o.tZ)(a.Z,{size:20}):c?(0,o.tZ)(i.Z,{sx:{fontSize:20}}):n})}},72176:function(t,e,n){"use strict";n.d(e,{FN:function(){return o},Xy:function(){return i},f1:function(){return r}});let o="https://ente.io",i="support@ente.io",r="account-deletion@ente.io"}},function(t){t.O(0,[3602,4100,6832,2888,9774,179],function(){return t(t.s=50574)}),_N_E=t.O()}]);